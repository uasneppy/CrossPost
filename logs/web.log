2025-03-08 20:00:25,832 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:00:25,832 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:00:25,833 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:00:25,853 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:00:25,853 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:00:26,027 - bot - INFO - Bot initialized with state storage
2025-03-08 20:00:26,028 - __main__ - INFO - Starting bot in separate thread
2025-03-08 20:00:26,029 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:00:26,029 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:00:26,409 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:00:26,411 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:00:26,412 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:00:26,412 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:00:26,413 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:00:26,413 - bot - INFO - Bot started
2025-03-08 20:00:30,315 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-08 20:00:30,316 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-08 20:00:30,353 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:00:30] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:00:31,735 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:00:31] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:00:34,319 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-08 20:00:34,320 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-08 20:00:39,088 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-08 20:00:39,089 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-08 20:00:45,402 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-08 20:00:45,403 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-08 20:00:53,106 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:00:53,107 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:00:53,107 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:00:53,154 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:00:53,155 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:00:53,330 - bot - INFO - Bot initialized with state storage
2025-03-08 20:00:53,331 - __main__ - INFO - Starting bot in separate thread
2025-03-08 20:00:53,332 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:00:53,332 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:00:53,386 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:00:53] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:00:53,466 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:00:53] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:00:53,704 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:00:53,706 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:00:53,706 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:00:53,707 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:00:53,707 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:00:53,707 - bot - INFO - Bot started
2025-03-08 20:02:34,651 - server - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 68, in index
    pending = get_pending_channels()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 40, in block 'content'
    <h3 id="total-subscribers">{{ channels.values()|map(attribute='subscribers')|sum }}</h3>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/async_utils.py", line 48, in wrapper
    return normal_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/filters.py", line 1336, in sync_do_sum
    return sum(iterable, start)  # type: ignore[no-any-return, call-overload]
           ^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'subscribers'
2025-03-08 20:02:34,654 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:02:34] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-03-08 20:02:41,226 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:02:41,226 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:02:41,410 - bot - INFO - Bot initialized with state storage
2025-03-08 20:02:41,412 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:02:41,412 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:02:41,790 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:02:41,792 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:02:41,792 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:02:41,793 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:02:41,794 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:02:41,794 - bot - INFO - Bot started
2025-03-08 20:02:41,794 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:02:41,794 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:02:41,810 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:02:41,810 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:02:42,099 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:02:42] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:02:42,149 - server - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 69, in index
    return render_template('index.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 40, in block 'content'
    <h3 id="total-subscribers">{{ channels.values()|map(attribute='subscribers')|sum }}</h3>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/async_utils.py", line 48, in wrapper
    return normal_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/filters.py", line 1336, in sync_do_sum
    return sum(iterable, start)  # type: ignore[no-any-return, call-overload]
           ^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'subscribers'
2025-03-08 20:02:42,152 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:02:42] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-03-08 20:03:47,966 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:03:47,967 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:03:48,163 - bot - INFO - Bot initialized with state storage
2025-03-08 20:03:48,164 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:03:48,164 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:03:48,546 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:03:48,549 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:03:48,552 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:03:48,553 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:03:48,554 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:03:48,554 - bot - INFO - Bot started
2025-03-08 20:03:48,558 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:03:48,558 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:03:48,595 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:03:48,595 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:03:48,971 - server - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 69, in index
    return render_template('index.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 122, in block 'content'
    {% for channel_id, channel in channels.items()|list|slice(0, 5) %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/filters.py", line 1083, in sync_do_slice
    items_per_slice = length // slices
                      ~~~~~~~^^~~~~~~~
ZeroDivisionError: integer division or modulo by zero
2025-03-08 20:03:48,974 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:03:48] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-03-08 20:04:13,801 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:04:13,802 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:04:13,976 - bot - INFO - Bot initialized with state storage
2025-03-08 20:04:13,977 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:04:13,978 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:04:14,419 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:04:14,420 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:04:14,421 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:04:14,422 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:04:14,422 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:04:14,422 - bot - INFO - Bot started
2025-03-08 20:04:14,423 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:04:14,423 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:04:14,438 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:04:14,439 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:04:14,647 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:04:14] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:04:14,792 - server - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 69, in index
    return render_template('index.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 122, in block 'content'
    {% for channel_id, channel in channels.items()|list|slice(0, 5) if channel_id %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 122, in template
    {% for channel_id, channel in channels.items()|list|slice(0, 5) if channel_id %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/filters.py", line 1083, in sync_do_slice
    items_per_slice = length // slices
                      ~~~~~~~^^~~~~~~~
ZeroDivisionError: integer division or modulo by zero
2025-03-08 20:04:14,794 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:04:14] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-03-08 20:04:59,633 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:04:59,633 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:04:59,835 - bot - INFO - Bot initialized with state storage
2025-03-08 20:04:59,836 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:04:59,836 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:05:00,291 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:05:00,293 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:05:00,293 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:05:00,294 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:05:00,294 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:05:00,294 - bot - INFO - Bot started
2025-03-08 20:05:00,295 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:05:00,295 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:05:00,300 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:05:00,300 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:05:00,661 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:00] "GET / HTTP/1.1" 200 -
2025-03-08 20:05:00,970 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:00] "GET /static/css/styles.css HTTP/1.1" 200 -
2025-03-08 20:05:01,334 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:01] "GET /static/js/main.js HTTP/1.1" 200 -
2025-03-08 20:05:01,848 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:05:14,798 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:05:14,799 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:05:14,966 - bot - INFO - Bot initialized with state storage
2025-03-08 20:05:14,968 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:05:14,968 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:05:15,425 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:05:15,427 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:05:15,427 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:05:15,428 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:05:15,428 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:05:15,428 - bot - INFO - Bot started
2025-03-08 20:05:15,428 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:05:15,429 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:05:15,443 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:05:15,444 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:05:15,808 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:15] "GET / HTTP/1.1" 200 -
2025-03-08 20:05:15,972 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:05:16,090 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:05:16,933 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:05:21,508 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:21] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:05:22,041 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:22] "GET / HTTP/1.1" 200 -
2025-03-08 20:05:22,200 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:05:22,321 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:22] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:05:23,103 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:23] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:05:39,852 - server - ERROR - Exception on /channels [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 78, in list_channels
    return render_template('channels.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/channels.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/channels.html", line 44, in block 'content'
    <tr class="channel-row {% if channel.is_nsfw %}nsfw{% else %}sfw{% endif %} {% if channel.subscribers < 300 %}small{% else %}large{% endif %}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'subscribers'
2025-03-08 20:05:39,853 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:39] "[35m[1mGET /channels HTTP/1.1[0m" 500 -
2025-03-08 20:05:48,479 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:48] "GET / HTTP/1.1" 200 -
2025-03-08 20:05:48,645 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:48] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:05:48,765 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:48] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:05:49,546 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:05:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:06:17,996 - server - ERROR - Exception on /pending [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 196, in list_pending
    return render_template('pending.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/pending.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 61, in top-level template code
    <span class="text-muted">© {{ now.year }} Українське ТҐ-Комʼюніті</span>
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 490, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'now' is undefined
2025-03-08 20:06:18,001 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:18] "[35m[1mGET /pending HTTP/1.1[0m" 500 -
2025-03-08 20:06:45,537 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:45] "GET / HTTP/1.1" 200 -
2025-03-08 20:06:45,820 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:45] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:06:45,876 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:06:46,635 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:06:47,807 - server - ERROR - Exception on /channels [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 78, in list_channels
    return render_template('channels.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/channels.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/channels.html", line 44, in block 'content'
    <tr class="channel-row {% if channel.is_nsfw %}nsfw{% else %}sfw{% endif %} {% if channel.subscribers < 300 %}small{% else %}large{% endif %}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'subscribers'
2025-03-08 20:06:47,808 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:06:47] "[35m[1mGET /channels HTTP/1.1[0m" 500 -
2025-03-08 20:08:38,214 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:08:38,214 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:08:38,376 - bot - INFO - Bot initialized with state storage
2025-03-08 20:08:38,377 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:08:38,377 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:08:38,778 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:08:38,780 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:08:38,781 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:08:38,782 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:08:38,782 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:08:38,783 - bot - INFO - Bot started
2025-03-08 20:08:38,783 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:08:38,783 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:08:38,790 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:08:38,791 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:08:39,091 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:08:39] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:08:39,451 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:08:39] "GET / HTTP/1.1" 200 -
2025-03-08 20:08:39,618 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:08:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:08:39,738 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:08:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:08:40,511 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:08:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:10:24,295 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:10:24,295 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:10:24,502 - bot - INFO - Bot initialized with state storage
2025-03-08 20:10:24,506 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:10:24,506 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:10:24,885 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:10:24,887 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:10:24,887 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:10:24,888 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:10:24,888 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:10:24,889 - bot - INFO - Bot started
2025-03-08 20:10:24,889 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:10:24,889 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:10:24,904 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:10:24,904 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:10:25,204 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:10:25] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:10:25,272 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:10:25] "GET / HTTP/1.1" 200 -
2025-03-08 20:10:25,437 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:10:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:10:25,565 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:10:25] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:10:26,426 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:10:26] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:11:35,172 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:11:35,172 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:11:35,400 - bot - INFO - Bot initialized with state storage
2025-03-08 20:11:35,401 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:11:35,401 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:11:35,832 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:11:35,835 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:11:35,835 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:11:35,836 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:11:35,836 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:11:35,836 - bot - INFO - Bot started
2025-03-08 20:11:35,836 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:11:35,837 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:11:35,841 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:11:35,841 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:11:36,218 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "GET / HTTP/1.1" 200 -
2025-03-08 20:11:36,274 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:11:36,390 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:11:36,509 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:11:36,689 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "GET / HTTP/1.1" 200 -
2025-03-08 20:11:36,970 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:11:36,989 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:11:37,606 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:11:37] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:02,734 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:02] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:12:02,905 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:02] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:02,906 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:03,733 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:03] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:15,552 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:15] "GET /channels/-1002487566547/edit HTTP/1.1" 200 -
2025-03-08 20:12:15,726 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:15] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:15,726 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:16,593 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:26,694 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:26] "GET / HTTP/1.1" 200 -
2025-03-08 20:12:26,864 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:26,987 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:26] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:27,802 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:27] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:32,718 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:32] "GET /pending HTTP/1.1" 200 -
2025-03-08 20:12:32,883 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:32,885 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:32] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:33,805 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:35,089 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:35] "GET / HTTP/1.1" 200 -
2025-03-08 20:12:35,254 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:35,255 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:35] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:35,927 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:35] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:39,596 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:39] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:12:39,764 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:39,765 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:40,559 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:12:42,670 - server - ERROR - Exception on /channels/-1002204399883/schedule [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 168, in edit_schedule
    return render_template('schedule_form.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/schedule_form.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/schedule_form.html", line 23, in block 'content'
    {% for i, day in enumerate(days) %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'enumerate' is undefined
2025-03-08 20:12:42,673 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:42] "[35m[1mGET /channels/-1002204399883/schedule HTTP/1.1[0m" 500 -
2025-03-08 20:12:55,534 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:55] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:12:55,691 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:55] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:12:55,820 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:55] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:12:56,626 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:12:56] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:13:01,852 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:01] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:13:02,018 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:02] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:13:02,021 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:13:02,823 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:02] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:13:13,571 - server - ERROR - Exception on /channels/-1002204399883/schedule [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 37, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 168, in edit_schedule
    return render_template('schedule_form.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/schedule_form.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 56, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/schedule_form.html", line 23, in block 'content'
    {% for i, day in enumerate(days) %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'enumerate' is undefined
2025-03-08 20:13:13,573 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:13] "[35m[1mGET /channels/-1002204399883/schedule HTTP/1.1[0m" 500 -
2025-03-08 20:13:55,640 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:13:55,640 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:13:55,868 - bot - INFO - Bot initialized with state storage
2025-03-08 20:13:55,870 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:13:55,870 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:13:56,249 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:13:56,251 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:13:56,251 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:13:56,252 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:13:56,252 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:13:56,252 - bot - INFO - Bot started
2025-03-08 20:13:56,255 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:13:56,255 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:13:56,263 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:13:56,263 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:13:56,634 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:56] "GET / HTTP/1.1" 200 -
2025-03-08 20:13:56,718 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:56] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:13:56,937 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:13:57,086 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:13:57,478 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:57] "GET / HTTP/1.1" 200 -
2025-03-08 20:13:57,781 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:13:57,924 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:13:58,579 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:13:58] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:14:56,301 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:56] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:14:56,888 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:56] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:14:56,932 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:56] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:14:57,335 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:57] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:14:58,593 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:58] "GET /channels/-1002204399883/schedule HTTP/1.1" 200 -
2025-03-08 20:14:58,756 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:58] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:14:58,758 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:14:59,431 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:14:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:04,822 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 0 to True
2025-03-08 20:15:04,822 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 1 to True
2025-03-08 20:15:04,823 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 2 to False
2025-03-08 20:15:04,824 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 3 to True
2025-03-08 20:15:04,825 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 4 to False
2025-03-08 20:15:04,825 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 5 to True
2025-03-08 20:15:04,826 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 6 to True
2025-03-08 20:15:04,827 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:04] "[32mPOST /channels/-1002204399883/schedule HTTP/1.1[0m" 302 -
2025-03-08 20:15:04,969 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:04] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:15:05,127 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:05,154 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:05] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:06,061 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:06] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:14,294 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:14] "GET /channels/-1002204399883/schedule HTTP/1.1" 200 -
2025-03-08 20:15:14,448 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:14,450 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:14] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:15,258 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:15] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:19,400 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:19] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:15:19,559 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:19,587 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:19] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:20,449 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:23,519 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:23] "GET /pending HTTP/1.1" 200 -
2025-03-08 20:15:23,694 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:23] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:23,695 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:23] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:24,614 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:24] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:26,458 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:26] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:15:26,618 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:26] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:26,739 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:26] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:27,718 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:27] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:15:29,702 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:29] "GET / HTTP/1.1" 200 -
2025-03-08 20:15:29,865 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:15:29,983 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:29] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:15:30,781 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:15:30] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:16:37,116 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:16:37,117 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:16:37,332 - bot - INFO - Bot initialized with state storage
2025-03-08 20:16:37,334 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:16:37,334 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:16:37,713 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:16:37,715 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:16:37,715 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:16:37,716 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:16:37,717 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:16:37,717 - bot - INFO - Bot started
2025-03-08 20:16:37,717 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:16:37,717 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:16:37,734 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:16:37,734 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:16:38,214 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:38] "GET / HTTP/1.1" 200 -
2025-03-08 20:16:38,514 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:16:38,660 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:38] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:16:39,296 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:16:59,123 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:59] "GET / HTTP/1.1" 200 -
2025-03-08 20:16:59,283 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:16:59,366 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:59] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:16:59,413 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:16:59] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:17:00,229 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:00] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:17:15,992 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:15] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:17:16,158 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:17:16,159 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:17:16,957 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:17:21,715 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:21] "GET / HTTP/1.1" 200 -
2025-03-08 20:17:21,881 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:17:21,995 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:21] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:17:22,808 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:17:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:17:54,396 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:17:54] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:17:57,070 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:17:57] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:19:02,370 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:19:02,370 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:19:02,571 - bot - INFO - Bot initialized with state storage
2025-03-08 20:19:02,573 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:19:02,573 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:19:02,966 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:19:02,968 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:19:02,968 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:19:02,969 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:19:02,969 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:19:02,969 - bot - INFO - Bot started
2025-03-08 20:19:02,970 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:19:02,972 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:19:02,985 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:19:02,985 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:19:03,344 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:03] "GET / HTTP/1.1" 200 -
2025-03-08 20:19:03,741 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:03] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:19:03,799 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:03] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:19:03,891 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:03] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:19:04,415 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:04] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:19:30,186 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:19:30] "[31m[1mGET /api/stats HTTP/1.1[0m" 401 -
2025-03-08 20:19:43,934 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:19:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:19:51,487 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:19:51,487 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:19:51,701 - bot - INFO - Bot initialized with state storage
2025-03-08 20:19:51,703 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:19:51,703 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:19:52,150 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:19:52,151 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:19:52,152 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:19:52,152 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:19:52,153 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:19:52,153 - bot - INFO - Bot started
2025-03-08 20:19:52,153 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:19:52,153 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:19:52,160 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:19:52,161 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:19:52,494 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:52] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:19:52,537 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:52] "GET / HTTP/1.1" 200 -
2025-03-08 20:19:52,710 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:19:52,822 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:19:53,134 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:53] "GET / HTTP/1.1" 200 -
2025-03-08 20:19:53,413 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:53] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:19:53,430 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:53] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:19:54,212 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:19:54] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:20:19,042 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:20:19] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:20:19,276 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:20:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:20:19,284 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:20:19] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:20:20,027 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:20:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:21:09,184 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:21:09] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:21:09,350 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:21:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:21:09,351 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:21:09] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:21:10,131 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:21:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:22:41,837 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:22:41,838 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:22:42,039 - bot - INFO - Bot initialized with state storage
2025-03-08 20:22:42,041 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:22:42,041 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:22:42,417 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:22:42,420 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:22:42,421 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:22:42,422 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:22:42,422 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:22:42,423 - bot - INFO - Bot started
2025-03-08 20:22:42,424 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:22:42,424 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:22:42,440 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:22:42,440 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:22:42,737 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:22:42] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:22:42,827 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:22:42] "GET / HTTP/1.1" 200 -
2025-03-08 20:22:42,993 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:22:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:22:43,116 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:22:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:22:43,913 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:22:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:23:00,380 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:00] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:23:00,785 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:00] "GET / HTTP/1.1" 200 -
2025-03-08 20:23:00,945 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:23:01,064 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:01] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:23:01,885 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:23:21,919 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:21] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:23:22,085 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:23:22,204 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:22] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:23:23,019 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:23] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:23:26,924 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:26] "GET / HTTP/1.1" 200 -
2025-03-08 20:23:27,092 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:23:27,211 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:27] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:23:28,025 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:23:28] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:25:15,351 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:25:15,351 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:25:15,585 - bot - INFO - Bot initialized with state storage
2025-03-08 20:25:15,587 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:25:15,587 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:25:16,081 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:25:16,083 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:25:16,084 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:25:16,085 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:25:16,087 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:25:16,088 - bot - INFO - Bot started
2025-03-08 20:25:16,088 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:25:16,088 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:25:16,106 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:25:16,106 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:25:16,306 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:25:16] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:25:16,441 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:25:16] "GET / HTTP/1.1" 200 -
2025-03-08 20:25:16,606 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:25:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:25:16,728 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:25:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:25:17,505 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:25:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:26:46,625 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:26:46,625 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:26:46,813 - bot - INFO - Bot initialized with state storage
2025-03-08 20:26:46,814 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:26:46,814 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:26:47,229 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:26:47,230 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:26:47,231 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:26:47,231 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:26:47,232 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:26:47,232 - bot - INFO - Bot started
2025-03-08 20:26:47,232 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:26:47,232 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:26:47,248 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:26:47,248 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:26:47,566 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:26:47] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:26:47,631 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:26:47] "GET / HTTP/1.1" 200 -
2025-03-08 20:26:47,994 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:26:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:26:48,148 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:26:48] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:26:48,792 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:26:48] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:27:58,799 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:27:58,799 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:27:58,987 - bot - INFO - Bot initialized with state storage
2025-03-08 20:27:58,988 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:27:58,988 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:27:59,377 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:27:59,378 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:27:59,379 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:27:59,379 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:27:59,380 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:27:59,380 - bot - INFO - Bot started
2025-03-08 20:27:59,380 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:27:59,381 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:27:59,387 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:27:59,387 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:27:59,632 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:27:59] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:27:59,734 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:27:59] "GET / HTTP/1.1" 200 -
2025-03-08 20:28:00,040 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:28:00,186 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:00] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:28:00,851 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:00] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:28:56,821 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:56] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:28:57,319 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:57] "GET / HTTP/1.1" 200 -
2025-03-08 20:28:57,617 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:28:57,763 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:28:58,397 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:28:58] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:32:40,112 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:32:40,113 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:32:40,438 - bot - INFO - Bot initialized with state storage
2025-03-08 20:32:40,439 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:32:40,439 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:32:40,820 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:32:40,822 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:32:40,822 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:32:40,823 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:32:40,824 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:32:40,824 - bot - INFO - Bot started
2025-03-08 20:32:40,825 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:32:40,826 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:32:40,832 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:32:40,832 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:32:41,199 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:32:41] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:32:41,316 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:32:41] "GET / HTTP/1.1" 200 -
2025-03-08 20:32:41,623 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:32:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:32:41,695 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:32:41] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:32:42,462 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:32:42] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:32:59,098 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:32:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:33:30,090 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:33:30] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:33:36,460 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:33:36,460 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:33:36,767 - bot - INFO - Bot initialized with state storage
2025-03-08 20:33:36,771 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:33:36,771 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:33:37,281 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:33:37,283 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:33:37,284 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:33:37,284 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:33:37,285 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:33:37,285 - bot - INFO - Bot started
2025-03-08 20:33:37,285 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:33:37,285 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:33:37,291 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:33:37,292 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:33:37,684 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:37] "GET / HTTP/1.1" 200 -
2025-03-08 20:33:37,706 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:37] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:33:37,847 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:33:37,970 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:37] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:33:38,225 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:38] "GET / HTTP/1.1" 200 -
2025-03-08 20:33:38,516 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:33:38,531 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:38] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:33:39,307 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:33:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:36:18,396 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:36:18,397 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:36:18,613 - bot - INFO - Bot initialized with state storage
2025-03-08 20:36:18,615 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:36:18,615 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:36:18,987 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:36:18,989 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:36:18,989 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:36:18,990 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:36:18,990 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-08 20:36:18,991 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:36:18,991 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:36:20,128 - utils.crosspost - INFO - Successfully updated subscriber counts for 4 channels
2025-03-08 20:36:20,128 - bot - INFO - Bot started
2025-03-08 20:36:20,129 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:36:20,131 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:36:20,150 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:36:20,151 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:36:20,437 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:36:20] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:36:20,524 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:36:20] "GET / HTTP/1.1" 200 -
2025-03-08 20:36:20,815 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:36:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:36:20,818 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:36:20] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:36:21,566 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:36:21] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:37:25,799 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:37:25,800 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:37:26,007 - bot - INFO - Bot initialized with state storage
2025-03-08 20:37:26,021 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:37:26,021 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:37:26,419 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:37:26,421 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:37:26,422 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:37:26,423 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:37:26,423 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-08 20:37:26,424 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:37:26,424 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:37:27,586 - utils.crosspost - INFO - Successfully updated subscriber counts for 4 channels
2025-03-08 20:37:27,586 - bot - INFO - Bot started
2025-03-08 20:37:27,586 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:37:27,588 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:37:27,601 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:37:27,601 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:37:27,841 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:37:27] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:37:27,961 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:37:27] "GET / HTTP/1.1" 200 -
2025-03-08 20:37:28,245 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:37:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:37:28,257 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:37:28] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:37:29,059 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:37:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:38:05,254 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:38:05,254 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:38:05,448 - bot - INFO - Bot initialized with state storage
2025-03-08 20:38:05,460 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:38:05,460 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:38:05,861 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:38:05,863 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:38:05,864 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:38:05,865 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:38:05,865 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-08 20:38:05,866 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:38:05,866 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:38:06,872 - utils.crosspost - INFO - Successfully updated subscriber counts for 4 channels
2025-03-08 20:38:06,872 - bot - INFO - Bot started
2025-03-08 20:38:06,872 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:38:06,874 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:38:06,888 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:38:06,888 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:38:07,509 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:07] "GET / HTTP/1.1" 200 -
2025-03-08 20:38:07,671 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:38:07,787 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:07] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:38:08,596 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:08] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:38:13,130 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:13] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:38:13,521 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:13] "GET / HTTP/1.1" 200 -
2025-03-08 20:38:13,754 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:38:13,811 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:13] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:38:14,572 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:38:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:40:17,534 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:40:17,535 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:40:17,801 - bot - INFO - Bot initialized with state storage
2025-03-08 20:40:17,803 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:40:17,803 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:40:18,246 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:40:18,247 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:40:18,248 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:40:18,248 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:40:18,249 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-08 20:40:18,250 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:40:18,250 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:40:19,371 - utils.crosspost - INFO - Successfully updated subscriber counts for 4 channels
2025-03-08 20:40:19,372 - bot - INFO - Bot started
2025-03-08 20:40:19,372 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:40:19,372 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:40:19,389 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:40:19,390 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:40:19,646 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:40:19] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:40:19,763 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:40:19] "GET / HTTP/1.1" 200 -
2025-03-08 20:40:19,925 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:40:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:40:20,045 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:40:20] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:40:20,936 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:40:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:40:31,082 - werkzeug - INFO - 127.0.0.1 - - [08/Mar/2025 20:40:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:41:04,134 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-08 20:41:04,137 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-08 20:41:04,496 - bot - INFO - Bot initialized with state storage
2025-03-08 20:41:04,498 - handlers.channel - INFO - Channel handlers registered
2025-03-08 20:41:04,499 - handlers.admin - INFO - Admin handlers registered
2025-03-08 20:41:04,873 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-08 20:41:04,876 - apscheduler.scheduler - INFO - Scheduler started
2025-03-08 20:41:04,876 - utils.scheduler - INFO - Scheduler started
2025-03-08 20:41:04,877 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-08 20:41:04,878 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-08 20:41:04,880 - utils.scheduler - INFO - Current time is past 6 PM Kyiv time, skipping today
2025-03-08 20:41:04,880 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:41:05,859 - utils.crosspost - INFO - Successfully updated subscriber counts for 4 channels
2025-03-08 20:41:05,859 - bot - INFO - Bot started
2025-03-08 20:41:05,859 - __main__ - INFO - Starting bot polling in separate thread
2025-03-08 20:41:05,859 - __main__ - INFO - Starting web server on port 5000
2025-03-08 20:41:05,882 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.19:5000
2025-03-08 20:41:05,882 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-08 20:41:06,251 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:06] "GET / HTTP/1.1" 200 -
2025-03-08 20:41:06,420 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:41:06,544 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:06] "GET /static/js/main.js HTTP/1.1" 200 -
2025-03-08 20:41:07,401 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:07] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:41:12,334 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:12] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-08 20:41:12,713 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:12] "GET / HTTP/1.1" 200 -
2025-03-08 20:41:12,872 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:41:12,993 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:12] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:41:13,810 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:13] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:41:44,092 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:41:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:42:14,100 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:42:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:42:44,097 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:42:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:13,918 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:13] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:17,861 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:17] "GET /pending HTTP/1.1" 200 -
2025-03-08 20:43:18,029 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:18] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:18,094 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:18,977 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:18] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:20,135 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:20] "GET / HTTP/1.1" 200 -
2025-03-08 20:43:20,297 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:20] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:20,297 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:20,988 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:24,456 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:24] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:43:24,624 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:24,625 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:24] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:25,434 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:25] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:36,200 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:36] "GET /channels/-1002204399883/remove HTTP/1.1" 200 -
2025-03-08 20:43:36,377 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:36,378 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:37,318 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:37] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:42,197 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:42] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:43:42,363 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:42,365 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:42] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:43,186 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:46,960 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:46] "GET /channels/-1002204399883/schedule HTTP/1.1" 200 -
2025-03-08 20:43:47,120 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:47] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:47,121 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:47,931 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:47] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:52,582 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 0 to True
2025-03-08 20:43:52,583 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 1 to True
2025-03-08 20:43:52,584 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 2 to True
2025-03-08 20:43:52,584 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 3 to True
2025-03-08 20:43:52,585 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 4 to True
2025-03-08 20:43:52,586 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 5 to True
2025-03-08 20:43:52,587 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 6 to True
2025-03-08 20:43:52,610 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:52] "[32mPOST /channels/-1002204399883/schedule HTTP/1.1[0m" 302 -
2025-03-08 20:43:52,756 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:52] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:43:52,918 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:52,944 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:53,842 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:53] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:43:57,949 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:57] "GET / HTTP/1.1" 200 -
2025-03-08 20:43:58,111 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:58] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:43:58,232 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:58] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:43:59,054 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:43:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:44:21,875 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-08 20:44:22,334 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-08 20:44:29,101 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:44:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:44:59,674 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:44:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:45:03,820 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-08 20:45:03,821 - handlers.channel - INFO - Processing channel name for user 1336308262: Testing SFW #2
2025-03-08 20:45:03,821 - handlers.channel - INFO - Stored channel title 'Testing SFW #2' for user 1336308262
2025-03-08 20:45:03,966 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-08 20:45:03,966 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-08 20:45:13,537 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-08 20:45:13,539 - handlers.channel - INFO - Processing channel URL for user 1336308262: @testingsfw2
2025-03-08 20:45:13,539 - handlers.channel - INFO - Stored channel username 'testingsfw2' for user 1336308262
2025-03-08 20:45:13,924 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-08 20:45:13,924 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-08 20:45:20,346 - handlers.channel - INFO - Handling waiting_emoji state for user 1336308262
2025-03-08 20:45:20,348 - handlers.channel - INFO - Processing emoji selection for user 1336308262
2025-03-08 20:45:20,348 - handlers.channel - INFO - Found emojis: ['😁😇😘']
2025-03-08 20:45:20,348 - handlers.channel - INFO - Stored emojis ['😁😇😘'] for user 1336308262
2025-03-08 20:45:20,501 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-08 20:45:20,501 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-08 20:45:22,784 - handlers.channel - INFO - Handling waiting_admin_verification state for user 1336308262
2025-03-08 20:45:22,784 - handlers.channel - INFO - Processing admin verification for user 1336308262
2025-03-08 20:45:22,786 - handlers.channel - INFO - Channel data so far: {'title': 'Testing SFW #2', 'username': 'testingsfw2', 'emojis': ['😁😇😘']}
2025-03-08 20:45:22,786 - handlers.channel - INFO - Skipping admin verification check for now
2025-03-08 20:45:22,985 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_admin_verification
2025-03-08 20:45:22,985 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_admin_verification to ChannelStates:waiting_post_forward
2025-03-08 20:45:29,104 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:45:29,883 - handlers.channel - INFO - Handling waiting_post_forward state for user 1336308262
2025-03-08 20:45:29,883 - handlers.channel - INFO - Processing forwarded post from user 1336308262
2025-03-08 20:45:29,883 - handlers.channel - INFO - Message details: forward_from_chat={'id': -1002297658240, 'type': 'channel', 'title': 'Testing SFW #2', 'username': 'testingsfw2', 'first_name': None, 'last_name': None, 'is_forum': None, 'max_reaction_count': None, 'photo': None, 'bio': None, 'join_to_send_messages': None, 'join_by_request': None, 'has_private_forwards': None, 'has_restricted_voice_and_video_messages': None, 'description': None, 'invite_link': None, 'pinned_message': None, 'permissions': None, 'slow_mode_delay': None, 'message_auto_delete_time': None, 'has_protected_content': None, 'sticker_set_name': None, 'can_set_sticker_set': None, 'linked_chat_id': None, 'location': None, 'active_usernames': None, 'emoji_status_custom_emoji_id': None, 'has_hidden_members': None, 'has_aggressive_anti_spam_enabled': None, 'emoji_status_expiration_date': None, 'available_reactions': None, 'accent_color_id': None, 'background_custom_emoji_id': None, 'profile_accent_color_id': None, 'profile_background_custom_emoji_id': None, 'has_visible_history': None, 'unrestrict_boost_count': None, 'custom_emoji_sticker_set_name': None, 'business_intro': None, 'business_location': None, 'business_opening_hours': None, 'personal_chat': None, 'birthdate': None, 'can_send_paid_media': None}
2025-03-08 20:45:29,883 - handlers.channel - INFO - Chat type: channel
2025-03-08 20:45:29,883 - handlers.channel - INFO - Processing channel: -1002297658240 - Testing SFW #2
2025-03-08 20:45:35,258 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:35] "GET /pending HTTP/1.1" 200 -
2025-03-08 20:45:35,901 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:45:35,902 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:35] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:45:36,277 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:36] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:45:38,792 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:38] "GET /pending/-1002297658240 HTTP/1.1" 200 -
2025-03-08 20:45:38,954 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:38] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:45:38,955 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:45:39,806 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:45:45,220 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:45] "[32mPOST /pending/-1002297658240 HTTP/1.1[0m" 302 -
2025-03-08 20:45:45,369 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:45] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:45:45,536 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:45:45,656 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:45] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:45:46,462 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:45:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:46:10,043 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:10] "GET / HTTP/1.1" 200 -
2025-03-08 20:46:10,210 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:46:10,331 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:10] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:46:11,152 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:11] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:46:18,861 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:18] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:46:19,027 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:46:19,151 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:19] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:46:19,950 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:46:34,935 - handlers.admin - INFO - Admin callback: update_subscribers
2025-03-08 20:46:34,936 - handlers.admin - INFO - Admin callback: update_subscribers
2025-03-08 20:46:35,241 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-08 20:46:36,640 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-08 20:46:36,779 - handlers.admin - INFO - Manual subscriber count update completed successfully
2025-03-08 20:46:39,274 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:39] "GET / HTTP/1.1" 200 -
2025-03-08 20:46:39,441 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:46:39,558 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:46:40,399 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:46:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:46:53,392 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-08 20:46:53,394 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-08 20:46:53,742 - utils.scheduler - INFO - Scheduling immediate crosspost
2025-03-08 20:46:53,742 - utils.scheduler - INFO - Found 5 active channels for immediate crosspost
2025-03-08 20:46:53,742 - utils.crosspost - INFO - Creating crosspost for 5 active channels
2025-03-08 20:46:54,536 - utils.crosspost - INFO - Found 3 small channels (<300 subscribers) and 0 large channels
2025-03-08 20:46:54,536 - utils.crosspost - INFO - Only 3 channels available, using all of them
2025-03-08 20:46:54,665 - utils.crosspost - INFO - Preparing SFW crosspost for 3 channels
2025-03-08 20:46:55,460 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002467496944 (excluding itself from list)
2025-03-08 20:46:55,756 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002357763694 (excluding itself from list)
2025-03-08 20:46:55,987 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002297658240 (excluding itself from list)
2025-03-08 20:46:55,987 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-08 20:46:56,489 - utils.crosspost - INFO - Found 2 small channels (<300 subscribers) and 0 large channels
2025-03-08 20:46:56,490 - utils.crosspost - INFO - Only 2 channels available, using all of them
2025-03-08 20:46:56,628 - utils.crosspost - INFO - Preparing NSFW 🔞 crosspost for 2 channels
2025-03-08 20:46:56,800 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002204399883 (excluding itself from list)
2025-03-08 20:46:56,988 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002487566547 (excluding itself from list)
2025-03-08 20:46:56,989 - utils.crosspost - INFO - Completed crosspost for NSFW 🔞 group
2025-03-08 20:46:56,989 - utils.scheduler - INFO - Successfully executed manual crosspost
2025-03-08 20:46:57,133 - handlers.admin - INFO - Manual crosspost completed successfully
2025-03-08 20:47:11,103 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:47:11] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:47:41,111 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:47:41] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:48:11,110 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:48:11] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:48:41,176 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:48:41] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:10,419 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:13,824 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:13] "GET /channels HTTP/1.1" 200 -
2025-03-08 20:49:13,988 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:49:14,113 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:14] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:49:14,927 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:19,848 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:19] "GET /channels/-1002204399883/schedule HTTP/1.1" 200 -
2025-03-08 20:49:20,016 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:20] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:49:20,017 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:20] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:49:20,830 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:24,208 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 0 to True
2025-03-08 20:49:24,209 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 1 to True
2025-03-08 20:49:24,210 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 2 to True
2025-03-08 20:49:24,210 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 3 to True
2025-03-08 20:49:24,211 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 4 to True
2025-03-08 20:49:24,211 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 5 to False
2025-03-08 20:49:24,212 - utils.storage - INFO - Set schedule for channel -1002204399883 on day 6 to True
2025-03-08 20:49:24,213 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:24] "[32mPOST /channels/-1002204399883/schedule HTTP/1.1[0m" 302 -
2025-03-08 20:49:24,357 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:24] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-08 20:49:24,522 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:24] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:49:24,543 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:24] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:49:25,461 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:25] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:43,186 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:43] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-08 20:49:43,348 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:49:43,349 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:49:44,185 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:49:50,950 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:50] "GET / HTTP/1.1" 200 -
2025-03-08 20:49:51,123 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-08 20:49:51,246 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:51] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-08 20:49:52,108 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:49:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:50:09,047 - handlers.admin - INFO - Admin callback: view_stats
2025-03-08 20:50:12,842 - handlers.admin - INFO - Admin callback: admin_back
2025-03-08 20:50:12,844 - handlers.admin - INFO - Admin callback: admin_back - returning to admin panel
2025-03-08 20:50:13,137 - handlers.admin - INFO - Admin panel markup displayed successfully
2025-03-08 20:50:17,234 - handlers.admin - INFO - Admin callback: view_approved
2025-03-08 20:50:22,108 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:50:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:50:25,368 - handlers.admin - INFO - Admin callback: admin_back
2025-03-08 20:50:25,370 - handlers.admin - INFO - Admin callback: admin_back - returning to admin panel
2025-03-08 20:50:25,678 - handlers.admin - INFO - Admin panel markup displayed successfully
2025-03-08 20:50:52,217 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:50:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:51:22,105 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:51:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:51:52,106 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:51:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:52:22,107 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:52:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-08 20:53:21,225 - werkzeug - INFO - 172.31.128.19 - - [08/Mar/2025 20:53:21] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:25:06,853 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:25:06,856 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:25:07,455 - bot - INFO - Bot initialized with state storage
2025-03-09 09:25:07,466 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:25:07,466 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:25:07,836 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:25:07,838 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:25:07,838 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:25:07,839 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:25:07,839 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:25:07,840 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:25:07,840 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:25:07,840 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:25:09,208 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:25:09,208 - bot - INFO - Bot started
2025-03-09 09:25:09,208 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:25:09,208 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:25:09,222 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:25:09,222 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:25:31,500 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:25:31,502 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:25:31,788 - bot - INFO - Bot initialized with state storage
2025-03-09 09:25:31,790 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:25:31,790 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:25:32,175 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:25:32,177 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:25:32,177 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:25:32,178 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:25:32,179 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:25:32,179 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:25:32,181 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:25:32,181 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:25:33,456 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:25:33,457 - bot - INFO - Bot started
2025-03-09 09:25:33,458 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:25:33,458 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:25:33,475 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:25:33,475 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:25:34,654 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:25:34] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:25:44,802 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 09:25:45,315 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 09:25:50,120 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 09:25:50,120 - handlers.channel - INFO - Processing channel name for user 1336308262: MonoYiff
2025-03-09 09:25:50,122 - handlers.channel - INFO - Stored channel title 'MonoYiff' for user 1336308262
2025-03-09 09:25:50,514 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 09:25:50,515 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 09:28:14,609 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:28:14,610 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:28:14,925 - bot - INFO - Bot initialized with state storage
2025-03-09 09:28:14,930 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:28:14,930 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:28:15,369 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:28:15,371 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:28:15,372 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:28:15,372 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:28:15,373 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:28:15,373 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:28:15,374 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:28:15,374 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:28:17,404 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:28:17,404 - bot - INFO - Bot started
2025-03-09 09:28:17,404 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:28:17,405 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:28:17,413 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:28:17,413 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:28:41,120 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:28:41,121 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:28:41,715 - utils.scheduler - INFO - Scheduling immediate crosspost
2025-03-09 09:28:41,715 - utils.scheduler - INFO - Found 5 active channels for immediate crosspost
2025-03-09 09:28:41,715 - utils.crosspost - INFO - Creating crosspost for 5 active channels
2025-03-09 09:28:42,462 - utils.crosspost - INFO - Found 3 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:28:42,462 - utils.crosspost - INFO - Only 3 channels available, using all of them
2025-03-09 09:28:42,600 - utils.crosspost - INFO - Preparing SFW crosspost for 3 channels
2025-03-09 09:28:43,402 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002467496944 (excluding itself from list)
2025-03-09 09:28:43,716 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002357763694 (excluding itself from list)
2025-03-09 09:28:44,060 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002297658240 (excluding itself from list)
2025-03-09 09:28:44,060 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-09 09:28:44,558 - utils.crosspost - INFO - Found 2 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:28:44,558 - utils.crosspost - INFO - Only 2 channels available, using all of them
2025-03-09 09:28:44,680 - utils.crosspost - INFO - Preparing NSFW 🔞 crosspost for 2 channels
2025-03-09 09:28:44,868 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002204399883 (excluding itself from list)
2025-03-09 09:28:45,054 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002487566547 (excluding itself from list)
2025-03-09 09:28:45,055 - utils.crosspost - INFO - Completed crosspost for NSFW 🔞 group
2025-03-09 09:28:45,055 - utils.scheduler - INFO - Successfully executed manual crosspost
2025-03-09 09:28:45,211 - handlers.admin - INFO - Manual crosspost completed successfully
2025-03-09 09:32:33,402 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:32:33,403 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:32:33,642 - bot - INFO - Bot initialized with state storage
2025-03-09 09:32:33,644 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:32:33,644 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:32:34,016 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:32:34,018 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:32:34,019 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:32:34,020 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:32:34,020 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:32:34,021 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:32:34,021 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:32:34,021 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:32:35,367 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:32:35,367 - bot - INFO - Bot started
2025-03-09 09:32:35,367 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:32:35,368 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:32:35,378 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:32:35,378 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:32:35,846 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:32:35] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:34:14,524 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:34:14,524 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:34:14,748 - bot - INFO - Bot initialized with state storage
2025-03-09 09:34:14,749 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:34:14,749 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:34:15,158 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:34:15,160 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:34:15,160 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:34:15,161 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:34:15,162 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:34:15,163 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:34:15,163 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:34:15,163 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:34:16,602 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:34:16,602 - bot - INFO - Bot started
2025-03-09 09:34:16,603 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:34:16,603 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:34:16,610 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:34:16,611 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:34:16,920 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:34:16] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:35:12,915 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:35:12,916 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:35:13,213 - bot - INFO - Bot initialized with state storage
2025-03-09 09:35:13,228 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:35:13,229 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:35:13,673 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:35:13,674 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:35:13,675 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:35:13,676 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:35:13,676 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:35:13,676 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:35:13,677 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:35:13,677 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:35:14,893 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:35:14,893 - bot - INFO - Bot started
2025-03-09 09:35:14,894 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:35:14,894 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:35:14,902 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:35:14,902 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:35:15,187 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:35:15] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:36:27,725 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:36:27,725 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:36:28,026 - bot - INFO - Bot initialized with state storage
2025-03-09 09:36:28,045 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:36:28,045 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:36:28,480 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:36:28,482 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:36:28,483 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:36:28,483 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:36:28,484 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:36:28,484 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:36:28,485 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:36:28,485 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:36:29,906 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:36:29,907 - bot - INFO - Bot started
2025-03-09 09:36:29,907 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:36:29,908 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:36:29,915 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:36:29,915 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:36:37,126 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:36:37] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:36:38,812 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:36:38] "GET / HTTP/1.1" 200 -
2025-03-09 09:36:39,606 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:36:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:36:39,810 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:36:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:36:40,012 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:36:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:10,173 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:15,196 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:15] "GET /channels HTTP/1.1" 200 -
2025-03-09 09:37:15,484 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:37:15,607 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:15] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:37:16,380 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:21,259 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:21] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 09:37:21,427 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:37:21,433 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:21] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:37:22,281 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:27,657 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:27] "GET /pending HTTP/1.1" 200 -
2025-03-09 09:37:27,824 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:27] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:37:27,828 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:37:28,855 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:28] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:30,658 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:30] "GET / HTTP/1.1" 200 -
2025-03-09 09:37:30,823 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:37:30,943 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:30] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:37:31,772 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:38,520 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:38] "GET /channels/-1002467496944 HTTP/1.1" 200 -
2025-03-09 09:37:38,691 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:37:38,760 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:38] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:37:39,508 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:37:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:37:59,936 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:38:06,233 - handlers.admin - INFO - Admin callback: manage_-1002204399883
2025-03-09 09:38:10,044 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:38:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:38:12,106 - handlers.admin - INFO - Admin callback: set_position_-1002204399883
2025-03-09 09:38:17,147 - handlers.admin - INFO - Admin callback: save_position_-1002204399883_1
2025-03-09 09:38:17,150 - utils.storage - INFO - Set reserved position 1 for channel -1002204399883
2025-03-09 09:38:17,438 - handlers.admin - INFO - Admin callback: manage_-1002204399883
2025-03-09 09:38:23,230 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:38:25,016 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:38:28,767 - handlers.admin - INFO - Admin callback: admin_back
2025-03-09 09:38:28,769 - handlers.admin - INFO - Admin callback: admin_back - returning to admin panel
2025-03-09 09:38:29,037 - handlers.admin - INFO - Admin panel markup displayed successfully
2025-03-09 09:38:31,505 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:38:31,506 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:38:31,806 - utils.scheduler - INFO - Scheduling immediate crosspost
2025-03-09 09:38:31,807 - utils.scheduler - INFO - Found 5 active channels for immediate crosspost
2025-03-09 09:38:31,807 - utils.crosspost - INFO - Creating crosspost for 5 active channels
2025-03-09 09:38:32,539 - utils.crosspost - INFO - Found 3 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:38:32,541 - utils.crosspost - INFO - Found 0 channels with reserved positions for SFW content
2025-03-09 09:38:32,542 - utils.crosspost - INFO - Only 3 channels available, using all of them
2025-03-09 09:38:32,669 - utils.crosspost - INFO - Preparing SFW crosspost for 3 channels
2025-03-09 09:38:33,451 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002467496944 (excluding itself from list)
2025-03-09 09:38:33,731 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002357763694 (excluding itself from list)
2025-03-09 09:38:33,973 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002297658240 (excluding itself from list)
2025-03-09 09:38:33,973 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-09 09:38:34,459 - utils.crosspost - INFO - Found 2 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:38:34,460 - utils.crosspost - INFO - Found 1 channels with reserved positions for NSFW content
2025-03-09 09:38:34,460 - utils.crosspost - INFO - Reserved position 1 filled with channel Testing
2025-03-09 09:38:34,460 - utils.crosspost - INFO - Only 2 channels available, using all of them
2025-03-09 09:38:34,582 - utils.crosspost - INFO - Preparing NSFW 🔞 crosspost for 2 channels
2025-03-09 09:38:34,778 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002204399883 (excluding itself from list)
2025-03-09 09:38:34,943 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002487566547 (excluding itself from list)
2025-03-09 09:38:34,945 - utils.crosspost - INFO - Completed crosspost for NSFW 🔞 group
2025-03-09 09:38:34,945 - utils.scheduler - INFO - Successfully executed manual crosspost
2025-03-09 09:38:35,086 - handlers.admin - INFO - Manual crosspost completed successfully
2025-03-09 09:38:40,051 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:38:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:39:10,049 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:39:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:39:40,050 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:39:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:39:48,672 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:39:56,655 - handlers.admin - INFO - Admin callback: manage_-1002204399883
2025-03-09 09:40:16,905 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:40:20,673 - handlers.admin - INFO - Admin callback: manage_-1002297658240
2025-03-09 09:40:23,286 - handlers.admin - INFO - Admin callback: set_position_-1002297658240
2025-03-09 09:40:24,332 - handlers.admin - INFO - Admin callback: save_position_-1002297658240_1
2025-03-09 09:40:24,336 - utils.storage - INFO - Set reserved position 1 for channel -1002297658240
2025-03-09 09:40:24,613 - handlers.admin - INFO - Admin callback: manage_-1002297658240
2025-03-09 09:40:26,642 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:40:28,024 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 09:40:31,684 - handlers.admin - INFO - Admin callback: admin_back
2025-03-09 09:40:31,686 - handlers.admin - INFO - Admin callback: admin_back - returning to admin panel
2025-03-09 09:40:31,964 - handlers.admin - INFO - Admin panel markup displayed successfully
2025-03-09 09:40:33,480 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:40:33,482 - handlers.admin - INFO - Admin callback: trigger_post
2025-03-09 09:40:33,772 - utils.scheduler - INFO - Scheduling immediate crosspost
2025-03-09 09:40:33,773 - utils.scheduler - INFO - Found 5 active channels for immediate crosspost
2025-03-09 09:40:33,773 - utils.crosspost - INFO - Creating crosspost for 5 active channels
2025-03-09 09:40:34,048 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:40:34] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:40:34,511 - utils.crosspost - INFO - Found 3 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:40:34,511 - utils.crosspost - INFO - Found 1 channels with reserved positions for SFW content
2025-03-09 09:40:34,511 - utils.crosspost - INFO - Reserved position 1 filled with channel Testing SFW #2
2025-03-09 09:40:34,512 - utils.crosspost - INFO - Only 3 channels available, using all of them
2025-03-09 09:40:34,650 - utils.crosspost - INFO - Preparing SFW crosspost for 3 channels
2025-03-09 09:40:35,428 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002467496944 (excluding itself from list)
2025-03-09 09:40:35,662 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002357763694 (excluding itself from list)
2025-03-09 09:40:36,129 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002297658240 (excluding itself from list)
2025-03-09 09:40:36,129 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-09 09:40:36,621 - utils.crosspost - INFO - Found 2 small channels (<300 subscribers) and 0 large channels
2025-03-09 09:40:36,622 - utils.crosspost - INFO - Found 1 channels with reserved positions for NSFW content
2025-03-09 09:40:36,622 - utils.crosspost - INFO - Reserved position 1 filled with channel Testing
2025-03-09 09:40:36,622 - utils.crosspost - INFO - Only 2 channels available, using all of them
2025-03-09 09:40:36,744 - utils.crosspost - INFO - Preparing NSFW 🔞 crosspost for 2 channels
2025-03-09 09:40:36,931 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002204399883 (excluding itself from list)
2025-03-09 09:40:37,104 - utils.crosspost - INFO - Sent NSFW 🔞 crosspost to channel -1002487566547 (excluding itself from list)
2025-03-09 09:40:37,104 - utils.crosspost - INFO - Completed crosspost for NSFW 🔞 group
2025-03-09 09:40:37,104 - utils.scheduler - INFO - Successfully executed manual crosspost
2025-03-09 09:40:37,242 - handlers.admin - INFO - Manual crosspost completed successfully
2025-03-09 09:40:50,090 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:40:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:41:09,526 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:41:09] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:41:39,530 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:41:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:42:09,533 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:09] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:42:39,984 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 09:42:39,985 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 09:42:40,303 - bot - INFO - Bot initialized with state storage
2025-03-09 09:42:40,310 - handlers.channel - INFO - Channel handlers registered
2025-03-09 09:42:40,310 - handlers.admin - INFO - Admin handlers registered
2025-03-09 09:42:40,686 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 09:42:40,688 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 09:42:40,689 - utils.scheduler - INFO - Scheduler started
2025-03-09 09:42:40,689 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 09:42:40,690 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 09:42:40,691 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 09:42:40,691 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 09:42:40,691 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 09:42:42,287 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 09:42:42,287 - bot - INFO - Bot started
2025-03-09 09:42:42,287 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 09:42:42,289 - __main__ - INFO - Starting web server on port 5000
2025-03-09 09:42:42,297 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 09:42:42,297 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 09:42:42,807 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:42] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 09:42:43,073 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:43] "GET / HTTP/1.1" 200 -
2025-03-09 09:42:43,359 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 09:42:43,729 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 09:42:44,341 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:42:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:43:14,356 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:43:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:43:44,355 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:43:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:44:14,365 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:44:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 09:44:44,357 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 09:44:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:20:12,242 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 10:20:12,245 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 10:20:12,549 - bot - INFO - Bot initialized with state storage
2025-03-09 10:20:12,555 - handlers.channel - INFO - Channel handlers registered
2025-03-09 10:20:12,555 - handlers.admin - INFO - Admin handlers registered
2025-03-09 10:20:12,941 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 10:20:12,943 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 10:20:12,944 - utils.scheduler - INFO - Scheduler started
2025-03-09 10:20:12,945 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 10:20:12,945 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 10:20:12,948 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 10:20:12,948 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 10:20:12,948 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 10:20:14,396 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 10:20:14,397 - bot - INFO - Bot started
2025-03-09 10:20:14,397 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 10:20:14,397 - __main__ - INFO - Starting web server on port 5000
2025-03-09 10:20:14,408 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 10:20:14,409 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 10:20:15,126 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 10:20:15,516 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 400. Description: Bad Request: query is too old and response timeout expired or query ID is invalid
2025-03-09 10:20:15,518 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1235, in __threaded_polling
    self.worker_pool.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 150, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 9233, in _run_middlewares_and_handler
    result = handler['function'](message)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/handlers/admin.py", line 1225, in handle_admin_callbacks
    admin_callback_handler(call, bot)
  File "/home/runner/workspace/handlers/admin.py", line 498, in admin_callback_handler
    bot.answer_callback_query(call.id, "Loading approved channels...")
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 6058, in answer_callback_query
    return apihelper.answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 1854, in answer_callback_query
    return _make_request(token, method_url, params=payload, method='post')
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 400. Description: Bad Request: query is too old and response timeout expired or query ID is invalid

2025-03-09 10:21:45,986 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 10:21:45,987 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 10:21:46,192 - bot - INFO - Bot initialized with state storage
2025-03-09 10:21:46,193 - handlers.channel - INFO - Channel handlers registered
2025-03-09 10:21:46,194 - handlers.admin - INFO - Admin handlers registered
2025-03-09 10:21:46,580 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 10:21:46,583 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 10:21:46,584 - utils.scheduler - INFO - Scheduler started
2025-03-09 10:21:46,585 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 10:21:46,586 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 10:21:46,587 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 10:21:46,587 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 10:21:46,588 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 10:21:48,006 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 10:21:48,006 - bot - INFO - Bot started
2025-03-09 10:21:48,006 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 10:21:48,007 - __main__ - INFO - Bot thread started successfully
2025-03-09 10:21:48,007 - __main__ - INFO - Watchdog thread started
2025-03-09 10:21:48,007 - __main__ - INFO - Watchdog thread started
2025-03-09 10:21:48,007 - __main__ - INFO - Starting web server on port 5000
2025-03-09 10:21:48,016 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 10:21:48,016 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 10:22:12,202 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 10:22:12,202 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 10:22:15,789 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 10:22:15,789 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 10:22:15,975 - bot - INFO - Bot initialized with state storage
2025-03-09 10:22:15,977 - handlers.channel - INFO - Channel handlers registered
2025-03-09 10:22:15,977 - handlers.admin - INFO - Admin handlers registered
2025-03-09 10:22:16,351 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 10:22:16,353 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 10:22:16,354 - utils.scheduler - INFO - Scheduler started
2025-03-09 10:22:16,354 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 10:22:16,355 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 10:22:16,355 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 10:22:16,355 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 10:22:16,356 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 10:22:17,595 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 10:22:17,596 - bot - INFO - Bot started
2025-03-09 10:22:17,596 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 10:22:17,596 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 10:22:17,596 - __main__ - INFO - Bot thread started successfully
2025-03-09 10:22:17,598 - __main__ - INFO - Watchdog thread started
2025-03-09 10:22:17,598 - __main__ - INFO - Watchdog thread started
2025-03-09 10:22:17,598 - __main__ - INFO - Starting web server on port 5000
2025-03-09 10:22:17,607 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 10:22:17,608 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 10:22:18,174 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:18] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 10:22:31,640 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:31] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 10:22:33,411 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:33] "GET / HTTP/1.1" 200 -
2025-03-09 10:22:34,136 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:34] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 10:22:34,295 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:34] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 10:22:34,560 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:22:34] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:23:04,591 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:23:04] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:23:34,587 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:23:34] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:24:04,596 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:24:04] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:24:35,586 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:24:35] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:25:01,675 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 10:25:01,675 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 10:58:40,516 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 10:58:40,516 - __main__ - INFO - Running as user: runner
2025-03-09 10:58:40,516 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 10:58:40,516 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 10:58:40,516 - __main__ - INFO - Running under uWSGI: False
2025-03-09 10:58:40,517 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 10:58:40,517 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 10:58:40,517 - __main__ - INFO - Importing bot module...
2025-03-09 10:58:40,665 - bot - INFO - Bot initialized with state storage
2025-03-09 10:58:40,665 - __main__ - INFO - Bot module imported successfully
2025-03-09 10:58:40,665 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 10:58:40,666 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 10:58:40,666 - __main__ - INFO - Successfully imported bot module
2025-03-09 10:58:40,666 - __main__ - INFO - Initializing bot...
2025-03-09 10:58:40,667 - handlers.channel - INFO - Channel handlers registered
2025-03-09 10:58:40,667 - handlers.admin - INFO - Admin handlers registered
2025-03-09 10:58:41,097 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 10:58:41,102 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 10:58:41,103 - utils.scheduler - INFO - Scheduler started
2025-03-09 10:58:41,103 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 10:58:41,104 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 10:58:41,105 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 10:58:41,105 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 10:58:41,105 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 10:58:42,671 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 10:58:42,672 - bot - INFO - Bot started
2025-03-09 10:58:42,672 - __main__ - INFO - Bot instance created successfully
2025-03-09 10:58:42,672 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 10:58:42,672 - __main__ - INFO - Starting bot thread...
2025-03-09 10:58:42,672 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 10:58:42,672 - __main__ - INFO - Bot thread started successfully
2025-03-09 10:58:42,675 - __main__ - INFO - Watchdog thread started
2025-03-09 10:58:42,675 - __main__ - INFO - Watchdog thread started
2025-03-09 10:58:42,675 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 10:58:42,675 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 10:58:42,684 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.20:5000
2025-03-09 10:58:42,684 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 10:58:44,521 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:44] "GET / HTTP/1.1" 200 -
2025-03-09 10:58:45,349 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 10:58:45,550 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:45] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 10:58:45,705 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:58:50,936 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:50] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 10:58:51,533 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:51] "GET / HTTP/1.1" 200 -
2025-03-09 10:58:51,813 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 10:58:51,832 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:51] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 10:58:52,582 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:58:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:59:22,644 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:59:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 10:59:52,642 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 10:59:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:00:00,001 - apscheduler.executors.default - INFO - Running job "update_all_channel_subscribers (trigger: cron[minute='0'], next run at: 2025-03-09 13:00:00 EET)" (scheduled at 2025-03-09 13:00:00+02:00)
2025-03-09 11:00:00,001 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 11:00:01,870 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 11:00:01,870 - apscheduler.executors.default - INFO - Job "update_all_channel_subscribers (trigger: cron[minute='0'], next run at: 2025-03-09 14:00:00 EET)" executed successfully
2025-03-09 11:00:22,642 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:00:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:00:52,599 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:00:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:01:22,646 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:01:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:01:52,654 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:01:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:03:17,651 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:03:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:04:17,764 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:04:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:04:22,642 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:04:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:04:52,650 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:04:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:05:54,300 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 11:06:17,658 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:06:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:07:17,666 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:07:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:08:17,662 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:08:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:09:17,663 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:09:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:10:18,326 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:10:18] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:11:17,689 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:11:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:12:17,670 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:12:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:13:17,672 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:13:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:13:25,325 - handlers.channel - INFO - User 1126690339 started channel application process
2025-03-09 11:13:25,470 - handlers.channel - INFO - Set state to waiting_channel_name for user 1126690339
2025-03-09 11:13:51,816 - handlers.channel - INFO - Handling waiting_channel_name state for user 1126690339
2025-03-09 11:13:51,816 - handlers.channel - INFO - Processing channel name for user 1126690339: https://t.me/gamefolklore
2025-03-09 11:13:51,816 - handlers.channel - INFO - Stored channel title 'https://t.me/gamefolklore' for user 1126690339
2025-03-09 11:13:51,964 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 11:13:51,965 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 11:14:08,556 - handlers.channel - INFO - User 1126690339 started channel application process
2025-03-09 11:14:08,705 - handlers.channel - INFO - Set state to waiting_channel_name for user 1126690339
2025-03-09 11:14:13,899 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:14:13] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:14:19,286 - handlers.channel - INFO - Handling waiting_channel_name state for user 1126690339
2025-03-09 11:14:19,287 - handlers.channel - INFO - Processing channel name for user 1126690339: Ігрова корчма Джейса
2025-03-09 11:14:19,287 - handlers.channel - INFO - Stored channel title 'Ігрова корчма Джейса' for user 1126690339
2025-03-09 11:14:19,552 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 11:14:19,553 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 11:14:22,612 - werkzeug - INFO - 172.31.128.20 - - [09/Mar/2025 11:14:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 11:14:44,315 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 11:14:44,315 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:05:48,173 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:05:48,175 - __main__ - INFO - Running as user: runner
2025-03-09 12:05:48,176 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:05:48,176 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:05:48,176 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:05:48,176 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:05:48,176 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:05:48,176 - __main__ - INFO - Importing bot module...
2025-03-09 12:05:48,734 - bot - INFO - Bot initialized with state storage
2025-03-09 12:05:48,734 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:05:48,734 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:05:48,735 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:05:48,735 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:05:48,735 - __main__ - INFO - Initializing bot...
2025-03-09 12:05:48,739 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:05:48,739 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:05:49,141 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:05:49,142 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:05:49,143 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:05:49,143 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:05:49,144 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:05:49,144 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:05:49,145 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:05:49,145 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:05:50,569 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:05:50,569 - bot - INFO - Bot started
2025-03-09 12:05:50,570 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:05:50,570 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:05:50,570 - __main__ - INFO - Starting bot thread...
2025-03-09 12:05:50,570 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:05:50,570 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:05:50,572 - __main__ - INFO - Watchdog thread started
2025-03-09 12:05:50,574 - __main__ - INFO - Watchdog thread started
2025-03-09 12:05:50,574 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:05:50,574 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:05:50,578 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.76:5000
2025-03-09 12:05:50,578 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:05:51,186 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:05:51] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 12:05:51,538 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:05:51] "GET / HTTP/1.1" 200 -
2025-03-09 12:05:51,819 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:05:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:05:52,165 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:05:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:05:52,825 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:05:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:05:59,452 - handlers.channel - INFO - User 1126690339 started channel application process
2025-03-09 12:05:59,614 - handlers.channel - INFO - Set state to waiting_channel_name for user 1126690339
2025-03-09 12:06:05,232 - handlers.channel - INFO - Handling waiting_channel_name state for user 1126690339
2025-03-09 12:06:05,233 - handlers.channel - INFO - Processing channel name for user 1126690339: Ігрова корчма Джейса
2025-03-09 12:06:05,233 - handlers.channel - INFO - Stored channel title 'Ігрова корчма Джейса' for user 1126690339
2025-03-09 12:06:05,398 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 12:06:05,398 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 12:06:10,818 - handlers.channel - INFO - Handling waiting_channel_url state for user 1126690339
2025-03-09 12:06:10,819 - handlers.channel - INFO - Processing channel URL for user 1126690339: @jaycegameinn
2025-03-09 12:06:10,819 - handlers.channel - INFO - Stored channel username 'jaycegameinn' for user 1126690339
2025-03-09 12:06:10,980 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 12:06:10,981 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 12:06:22,835 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:06:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:06:52,833 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:06:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:06:55,737 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:06:55,737 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:06:59,122 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:06:59,122 - __main__ - INFO - Running as user: runner
2025-03-09 12:06:59,122 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:06:59,122 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:06:59,122 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:06:59,122 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:06:59,122 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:06:59,123 - __main__ - INFO - Importing bot module...
2025-03-09 12:06:59,276 - bot - INFO - Bot initialized with state storage
2025-03-09 12:06:59,277 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:06:59,277 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:06:59,277 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:06:59,277 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:06:59,277 - __main__ - INFO - Initializing bot...
2025-03-09 12:06:59,278 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:06:59,279 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:06:59,678 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:06:59,679 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:06:59,680 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:06:59,680 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:06:59,681 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:06:59,681 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:06:59,682 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:06:59,682 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:07:01,172 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:07:01,172 - bot - INFO - Bot started
2025-03-09 12:07:01,172 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:07:01,172 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:07:01,173 - __main__ - INFO - Starting bot thread...
2025-03-09 12:07:01,173 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:07:01,175 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:07:01,175 - __main__ - INFO - Watchdog thread started
2025-03-09 12:07:01,175 - __main__ - INFO - Watchdog thread started
2025-03-09 12:07:01,176 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:07:01,176 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:07:01,180 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.76:5000
2025-03-09 12:07:01,180 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:07:01,531 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:01] "GET / HTTP/1.1" 200 -
2025-03-09 12:07:01,812 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:07:01,826 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:01] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:07:02,671 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:02] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:07:09,574 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:09] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 12:07:10,309 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:10] "GET / HTTP/1.1" 200 -
2025-03-09 12:07:10,469 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:10] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:07:10,591 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:10] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:07:11,365 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:11] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:07:39,887 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:39] "GET /channels HTTP/1.1" 200 -
2025-03-09 12:07:40,052 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:07:40,168 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:40] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:07:40,999 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:07:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:08:11,013 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:08:11] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:08:42,005 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:08:42] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:09:12,008 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:09:12] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:09:27,600 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:09:27,600 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:18:14,876 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:18:14,877 - __main__ - INFO - Running as user: runner
2025-03-09 12:18:14,877 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:18:14,877 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:18:14,877 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:18:14,877 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:18:14,877 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:18:14,878 - __main__ - INFO - Importing bot module...
2025-03-09 12:18:15,103 - bot - INFO - Bot initialized with state storage
2025-03-09 12:18:15,104 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:18:15,105 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:18:15,105 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:18:15,105 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:18:15,106 - __main__ - INFO - Initializing bot...
2025-03-09 12:18:15,109 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:18:15,109 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:18:15,496 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:18:15,499 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:18:15,499 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:18:15,500 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:18:15,500 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:18:15,501 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:18:15,501 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:18:15,501 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:18:16,989 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:18:16,990 - bot - INFO - Bot started
2025-03-09 12:18:16,990 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:18:16,990 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:18:16,990 - __main__ - INFO - Starting bot thread...
2025-03-09 12:18:16,991 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:18:16,991 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:18:16,993 - __main__ - INFO - Watchdog thread started
2025-03-09 12:18:16,993 - __main__ - INFO - Watchdog thread started
2025-03-09 12:18:16,994 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:18:16,994 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:18:16,998 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.76:5000
2025-03-09 12:18:16,998 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:18:17,936 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:17] "GET / HTTP/1.1" 200 -
2025-03-09 12:18:18,223 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:18:18,512 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:18] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:18:18,726 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 12:18:18,726 - handlers.channel - INFO - Found 5 approved channels
2025-03-09 12:18:18,726 - handlers.channel - INFO - Added channel -1002204399883: Testing to menu
2025-03-09 12:18:18,726 - handlers.channel - INFO - Added channel -1002467496944: Testing SFW to menu
2025-03-09 12:18:18,727 - handlers.channel - INFO - Added channel -1002357763694: Memes SFW to menu
2025-03-09 12:18:18,727 - handlers.channel - INFO - Added channel -1002487566547: Memes NSFW to menu
2025-03-09 12:18:18,727 - handlers.channel - INFO - Added channel -1002297658240: Testing SFW #2 to menu
2025-03-09 12:18:19,219 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:18:24,653 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:24] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 12:18:25,259 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:25] "GET / HTTP/1.1" 200 -
2025-03-09 12:18:25,489 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 12:18:25,540 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:25] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 12:18:26,332 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:26] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:18:56,355 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:18:56] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:19:26,349 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:19:26] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:19:56,345 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:19:56] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:20:27,028 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:20:27] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:20:57,028 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:20:57] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:22:15,038 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:22:15] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:22:33,098 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:22:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:22:56,357 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:22:56] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:23:16,119 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 12:23:16,120 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 12:23:20,893 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 12:23:20,893 - handlers.channel - INFO - Found 5 approved channels
2025-03-09 12:23:20,893 - handlers.channel - INFO - Added channel -1002204399883: Testing to menu
2025-03-09 12:23:20,893 - handlers.channel - INFO - Added channel -1002467496944: Testing SFW to menu
2025-03-09 12:23:20,894 - handlers.channel - INFO - Added channel -1002357763694: Memes SFW to menu
2025-03-09 12:23:20,894 - handlers.channel - INFO - Added channel -1002487566547: Memes NSFW to menu
2025-03-09 12:23:20,894 - handlers.channel - INFO - Added channel -1002297658240: Testing SFW #2 to menu
2025-03-09 12:23:22,879 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 12:23:22,880 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 12:23:24,456 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 12:23:24,456 - handlers.channel - INFO - Found 5 approved channels
2025-03-09 12:23:24,456 - handlers.channel - INFO - Added channel -1002204399883: Testing to menu
2025-03-09 12:23:24,456 - handlers.channel - INFO - Added channel -1002467496944: Testing SFW to menu
2025-03-09 12:23:24,456 - handlers.channel - INFO - Added channel -1002357763694: Memes SFW to menu
2025-03-09 12:23:24,456 - handlers.channel - INFO - Added channel -1002487566547: Memes NSFW to menu
2025-03-09 12:23:24,456 - handlers.channel - INFO - Added channel -1002297658240: Testing SFW #2 to menu
2025-03-09 12:23:27,099 - werkzeug - INFO - 172.31.128.76 - - [09/Mar/2025 12:23:27] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 12:23:29,698 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 12:23:29,698 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 12:23:32,275 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:23:32,276 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:46:55,919 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:46:55,922 - __main__ - INFO - Running as user: runner
2025-03-09 12:46:55,922 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:46:55,923 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:46:55,923 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:46:55,923 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:46:55,923 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:46:55,923 - __main__ - INFO - Importing bot module...
2025-03-09 12:46:56,568 - bot - INFO - Bot initialized with state storage
2025-03-09 12:46:56,568 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:46:56,568 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:46:56,568 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:46:56,568 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:46:56,568 - __main__ - INFO - Initializing bot...
2025-03-09 12:46:56,583 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:46:56,583 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:46:56,956 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:46:56,958 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:46:56,958 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:46:56,959 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:46:56,959 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:46:56,960 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:46:56,960 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:46:56,960 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:46:58,325 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:46:58,325 - bot - INFO - Bot started
2025-03-09 12:46:58,325 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:46:58,325 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:46:58,325 - __main__ - INFO - Starting bot thread...
2025-03-09 12:46:58,326 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:46:58,326 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:46:58,328 - __main__ - INFO - Watchdog thread started
2025-03-09 12:46:58,328 - __main__ - INFO - Watchdog thread started
2025-03-09 12:46:58,329 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:46:58,329 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:46:58,344 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 12:46:58,344 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:46:58,882 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 12:46:58] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 12:47:00,592 - handlers.channel - INFO - User 1126690339 started channel application process
2025-03-09 12:47:00,741 - handlers.channel - INFO - Set state to waiting_channel_name for user 1126690339
2025-03-09 12:47:12,766 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 12:47:12,973 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 12:47:16,239 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 12:47:16,240 - handlers.channel - INFO - Processing channel name for user 1336308262: ❌ Cancel Registration
2025-03-09 12:47:16,240 - handlers.channel - INFO - User 1336308262 cancelled operation
2025-03-09 12:48:34,718 - handlers.channel - INFO - Handling waiting_channel_name state for user 1126690339
2025-03-09 12:48:34,718 - handlers.channel - INFO - Processing channel name for user 1126690339: ❌ Cancel Registration
2025-03-09 12:48:34,718 - handlers.channel - INFO - User 1126690339 cancelled operation
2025-03-09 12:48:36,492 - handlers.channel - INFO - User 1126690339 started channel application process
2025-03-09 12:48:36,744 - handlers.channel - INFO - Set state to waiting_channel_name for user 1126690339
2025-03-09 12:48:44,605 - handlers.channel - INFO - Handling waiting_channel_name state for user 1126690339
2025-03-09 12:48:44,605 - handlers.channel - INFO - Processing channel name for user 1126690339: Ігрова корчма Джейса
2025-03-09 12:48:44,605 - handlers.channel - INFO - Stored channel title 'Ігрова корчма Джейса' for user 1126690339
2025-03-09 12:48:44,766 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 12:48:44,766 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 12:48:53,267 - handlers.channel - INFO - Handling waiting_channel_url state for user 1126690339
2025-03-09 12:48:53,267 - handlers.channel - INFO - Processing channel URL for user 1126690339: @jaycegameinn
2025-03-09 12:48:53,267 - handlers.channel - INFO - Stored channel username 'jaycegameinn' for user 1126690339
2025-03-09 12:48:53,454 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 12:48:53,454 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 12:49:07,127 - handlers.channel - INFO - Handling waiting_emoji state for user 1126690339
2025-03-09 12:49:07,127 - handlers.channel - INFO - Processing emoji selection for user 1126690339
2025-03-09 12:49:07,128 - handlers.channel - INFO - Found emojis: ['🎮👾🕹️']
2025-03-09 12:49:07,128 - handlers.channel - INFO - Stored emojis ['🎮👾🕹️'] for user 1126690339
2025-03-09 12:49:07,302 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-09 12:49:07,302 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-09 12:49:38,411 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:49:38,411 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:49:41,810 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:49:41,810 - __main__ - INFO - Running as user: runner
2025-03-09 12:49:41,810 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:49:41,810 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:49:41,810 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:49:41,810 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:49:41,810 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:49:41,811 - __main__ - INFO - Importing bot module...
2025-03-09 12:49:41,982 - bot - INFO - Bot initialized with state storage
2025-03-09 12:49:41,983 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:49:41,984 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:49:41,984 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:49:41,984 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:49:41,984 - __main__ - INFO - Initializing bot...
2025-03-09 12:49:41,992 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:49:41,992 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:49:42,412 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:49:42,414 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:49:42,414 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:49:42,415 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:49:42,415 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:49:42,416 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:49:42,416 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:49:42,416 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:49:43,863 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:49:43,864 - bot - INFO - Bot started
2025-03-09 12:49:43,864 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:49:43,864 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:49:43,864 - __main__ - INFO - Starting bot thread...
2025-03-09 12:49:43,864 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:49:43,864 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:49:43,866 - __main__ - INFO - Watchdog thread started
2025-03-09 12:49:43,866 - __main__ - INFO - Watchdog thread started
2025-03-09 12:49:43,867 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:49:43,867 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:49:43,880 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 12:49:43,880 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:49:50,137 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:49:50,137 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 12:49:53,121 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 12:49:53,547 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 12:49:53,547 - __main__ - INFO - Running as user: runner
2025-03-09 12:49:53,547 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 12:49:53,547 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 12:49:53,547 - __main__ - INFO - Running under uWSGI: False
2025-03-09 12:49:53,548 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 12:49:53,548 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 12:49:53,548 - __main__ - INFO - Importing bot module...
2025-03-09 12:49:53,704 - bot - INFO - Bot initialized with state storage
2025-03-09 12:49:53,704 - __main__ - INFO - Bot module imported successfully
2025-03-09 12:49:53,704 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 12:49:53,704 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 12:49:53,704 - __main__ - INFO - Successfully imported bot module
2025-03-09 12:49:53,704 - __main__ - INFO - Initializing bot...
2025-03-09 12:49:53,706 - handlers.channel - INFO - Channel handlers registered
2025-03-09 12:49:53,706 - handlers.admin - INFO - Admin handlers registered
2025-03-09 12:49:54,111 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 12:49:54,113 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 12:49:54,113 - utils.scheduler - INFO - Scheduler started
2025-03-09 12:49:54,114 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 12:49:54,114 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 12:49:54,115 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 12:49:54,115 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 12:49:54,115 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 12:49:55,326 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 12:49:55,327 - bot - INFO - Bot started
2025-03-09 12:49:55,327 - __main__ - INFO - Bot instance created successfully
2025-03-09 12:49:55,327 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 12:49:55,327 - __main__ - INFO - Starting bot thread...
2025-03-09 12:49:55,327 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 12:49:55,327 - __main__ - INFO - Bot thread started successfully
2025-03-09 12:49:55,329 - __main__ - INFO - Watchdog thread started
2025-03-09 12:49:55,329 - __main__ - INFO - Watchdog thread started
2025-03-09 12:49:55,330 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 12:49:55,330 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 12:49:55,343 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 12:49:55,343 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 12:49:55,530 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 12:49:55] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 12:49:57,052 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 12:49:57,466 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 12:50:00,451 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 12:50:00,451 - handlers.channel - INFO - Processing channel name for user 1336308262: ❌ Cancel Registration
2025-03-09 12:50:00,451 - handlers.channel - INFO - User 1336308262 cancelled operation
2025-03-09 12:50:34,130 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 12:50:34,281 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 12:50:36,538 - handlers.channel - INFO - User 1336308262 cancelled operation
2025-03-09 12:50:45,908 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 12:50:45,908 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:05:36,565 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:05:36,565 - __main__ - INFO - Running as user: runner
2025-03-09 13:05:36,565 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:05:36,566 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:05:36,566 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:05:36,566 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:05:36,566 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:05:36,566 - __main__ - INFO - Importing bot module...
2025-03-09 13:05:36,730 - bot - INFO - Bot initialized with state storage
2025-03-09 13:05:36,730 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:05:36,730 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:05:36,731 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:05:36,731 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:05:36,731 - __main__ - INFO - Initializing bot...
2025-03-09 13:05:36,732 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:05:36,732 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:05:37,116 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:05:37,117 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:05:37,118 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:05:37,118 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:05:37,119 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:05:37,119 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:05:37,119 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:05:37,119 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:05:38,546 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:05:38,546 - bot - INFO - Bot started
2025-03-09 13:05:38,547 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:05:38,547 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:05:38,547 - __main__ - INFO - Starting bot thread...
2025-03-09 13:05:38,548 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:05:38,548 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:05:38,550 - __main__ - INFO - Watchdog thread started
2025-03-09 13:05:38,550 - __main__ - INFO - Watchdog thread started
2025-03-09 13:05:38,551 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:05:38,551 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:05:38,565 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:05:38,565 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:05:44,588 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:05:44,589 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:05:50,493 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:05:50,493 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:05:57,149 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:05:57,150 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:06:02,313 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:06:02,313 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:06:10,472 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:06:10,473 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:06:24,666 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 13:06:24,666 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 13:06:47,782 - handlers.channel - INFO - Handling callback query: settings_-1002164101079
2025-03-09 13:06:47,783 - handlers.channel - INFO - Callback query: settings_-1002164101079
2025-03-09 13:06:51,111 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:06:51,111 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:06:54,512 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:06:54,513 - __main__ - INFO - Running as user: runner
2025-03-09 13:06:54,513 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:06:54,513 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:06:54,513 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:06:54,513 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:06:54,513 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:06:54,513 - __main__ - INFO - Importing bot module...
2025-03-09 13:06:54,670 - bot - INFO - Bot initialized with state storage
2025-03-09 13:06:54,670 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:06:54,670 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:06:54,670 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:06:54,670 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:06:54,670 - __main__ - INFO - Initializing bot...
2025-03-09 13:06:54,677 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:06:54,678 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:06:55,048 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:06:55,050 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:06:55,050 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:06:55,051 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:06:55,051 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:06:55,051 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:06:55,052 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:06:55,052 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:06:56,464 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:06:56,464 - bot - INFO - Bot started
2025-03-09 13:06:56,464 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:06:56,464 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:06:56,465 - __main__ - INFO - Starting bot thread...
2025-03-09 13:06:56,465 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:06:56,465 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:06:56,468 - __main__ - INFO - Watchdog thread started
2025-03-09 13:06:56,468 - __main__ - INFO - Watchdog thread started
2025-03-09 13:06:56,469 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:06:56,469 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:06:56,482 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:06:56,482 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:06:56,874 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:06:56] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:08:40,180 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:08:40,181 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:08:43,663 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:08:43,663 - __main__ - INFO - Running as user: runner
2025-03-09 13:08:43,664 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:08:43,664 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:08:43,664 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:08:43,664 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:08:43,664 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:08:43,664 - __main__ - INFO - Importing bot module...
2025-03-09 13:08:43,832 - bot - INFO - Bot initialized with state storage
2025-03-09 13:08:43,832 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:08:43,832 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:08:43,832 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:08:43,832 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:08:43,832 - __main__ - INFO - Initializing bot...
2025-03-09 13:08:43,841 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:08:43,841 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:08:44,234 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:08:44,235 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:08:44,236 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:08:44,237 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:08:44,238 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:08:44,238 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:08:44,238 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:08:44,239 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:08:45,729 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:08:45,730 - bot - INFO - Bot started
2025-03-09 13:08:45,730 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:08:45,730 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:08:45,730 - __main__ - INFO - Starting bot thread...
2025-03-09 13:08:45,730 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:08:45,730 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:08:45,732 - __main__ - INFO - Watchdog thread started
2025-03-09 13:08:45,732 - __main__ - INFO - Watchdog thread started
2025-03-09 13:08:45,733 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:08:45,733 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:08:45,747 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:08:45,747 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:08:45,941 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:08:45] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:10:14,809 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:10:14,809 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:10:18,249 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:10:18,249 - __main__ - INFO - Running as user: runner
2025-03-09 13:10:18,249 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:10:18,249 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:10:18,249 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:10:18,249 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:10:18,249 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:10:18,249 - __main__ - INFO - Importing bot module...
2025-03-09 13:10:18,428 - bot - INFO - Bot initialized with state storage
2025-03-09 13:10:18,428 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:10:18,428 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:10:18,428 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:10:18,428 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:10:18,428 - __main__ - INFO - Initializing bot...
2025-03-09 13:10:18,430 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:10:18,430 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:10:18,804 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:10:18,806 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:10:18,807 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:10:18,807 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:10:18,808 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:10:18,808 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:10:18,808 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:10:18,808 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:10:20,544 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:10:20,545 - bot - INFO - Bot started
2025-03-09 13:10:20,545 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:10:20,545 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:10:20,545 - __main__ - INFO - Starting bot thread...
2025-03-09 13:10:20,545 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:10:20,545 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:10:20,547 - __main__ - INFO - Watchdog thread started
2025-03-09 13:10:20,548 - __main__ - INFO - Watchdog thread started
2025-03-09 13:10:20,548 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:10:20,548 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:10:20,561 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:10:20,561 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:10:21,868 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:10:21] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:13:08,095 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:13:08,096 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:13:11,489 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:13:11,490 - __main__ - INFO - Running as user: runner
2025-03-09 13:13:11,490 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:13:11,490 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:13:11,490 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:13:11,490 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:13:11,490 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:13:11,491 - __main__ - INFO - Importing bot module...
2025-03-09 13:13:11,643 - bot - INFO - Bot initialized with state storage
2025-03-09 13:13:11,643 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:13:11,643 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:13:11,643 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:13:11,644 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:13:11,644 - __main__ - INFO - Initializing bot...
2025-03-09 13:13:11,645 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:13:11,645 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:13:12,135 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:13:12,136 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:13:12,137 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:13:12,137 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:13:12,138 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:13:12,139 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:13:12,139 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:13:12,139 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:13:13,754 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:13:13,755 - bot - INFO - Bot started
2025-03-09 13:13:13,755 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:13:13,755 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:13:13,755 - __main__ - INFO - Starting bot thread...
2025-03-09 13:13:13,755 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:13:13,755 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:13:13,757 - __main__ - INFO - Watchdog thread started
2025-03-09 13:13:13,757 - __main__ - INFO - Watchdog thread started
2025-03-09 13:13:13,758 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:13:13,758 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:13:13,771 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:13:13,771 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:13:14,031 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:13:14] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:13:42,190 - handlers.channel - INFO - User 8106482945 requested settings
2025-03-09 13:13:42,191 - handlers.channel - INFO - Found 0 approved channels for user 8106482945
2025-03-09 13:13:42,624 - handlers.channel - INFO - No approved channels found for user 8106482945
2025-03-09 13:13:50,473 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 13:13:50,473 - handlers.channel - INFO - Found 0 approved channels for user 1336308262
2025-03-09 13:13:50,637 - handlers.channel - INFO - No approved channels found for user 1336308262
2025-03-09 13:15:48,024 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:15:48,024 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:15:51,440 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:15:51,440 - __main__ - INFO - Running as user: runner
2025-03-09 13:15:51,440 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:15:51,440 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:15:51,441 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:15:51,441 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:15:51,441 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:15:51,441 - __main__ - INFO - Importing bot module...
2025-03-09 13:15:51,615 - bot - INFO - Bot initialized with state storage
2025-03-09 13:15:51,615 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:15:51,615 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:15:51,616 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:15:51,616 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:15:51,616 - __main__ - INFO - Initializing bot...
2025-03-09 13:15:51,617 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:15:51,617 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:15:51,998 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:15:52,000 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:15:52,000 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:15:52,001 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:15:52,001 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:15:52,002 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:15:52,002 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:15:52,002 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:15:53,428 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:15:53,429 - bot - INFO - Bot started
2025-03-09 13:15:53,429 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:15:53,429 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:15:53,429 - __main__ - INFO - Starting bot thread...
2025-03-09 13:15:53,429 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:15:53,429 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:15:53,431 - __main__ - INFO - Watchdog thread started
2025-03-09 13:15:53,432 - __main__ - INFO - Watchdog thread started
2025-03-09 13:15:53,432 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:15:53,432 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:15:53,446 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:15:53,447 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:15:53,685 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:15:53] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:16:25,108 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:16:25,108 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:16:28,520 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:16:28,520 - __main__ - INFO - Running as user: runner
2025-03-09 13:16:28,521 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:16:28,521 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:16:28,521 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:16:28,521 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:16:28,521 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:16:28,521 - __main__ - INFO - Importing bot module...
2025-03-09 13:16:28,673 - bot - INFO - Bot initialized with state storage
2025-03-09 13:16:28,673 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:16:28,673 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:16:28,674 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:16:28,674 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:16:28,674 - __main__ - INFO - Initializing bot...
2025-03-09 13:16:28,675 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:16:28,675 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:16:29,047 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:16:29,049 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:16:29,049 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:16:29,050 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:16:29,050 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:16:29,051 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:16:29,051 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:16:29,051 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:16:30,261 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:16:30,261 - bot - INFO - Bot started
2025-03-09 13:16:30,261 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:16:30,261 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:16:30,262 - __main__ - INFO - Starting bot thread...
2025-03-09 13:16:30,262 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:16:30,262 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:16:30,264 - __main__ - INFO - Watchdog thread started
2025-03-09 13:16:30,264 - __main__ - INFO - Watchdog thread started
2025-03-09 13:16:30,264 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:16:30,264 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:16:30,277 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:16:30,277 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:16:33,536 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:33] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:16:36,141 - server - INFO - User None accessed dashboard with 5 channels and 0 pending applications
2025-03-09 13:16:36,176 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:36] "GET / HTTP/1.1" 200 -
2025-03-09 13:16:36,472 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:16:36,755 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:36] "GET /static/js/main.js HTTP/1.1" 200 -
2025-03-09 13:16:37,407 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:16:37,407 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:37] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:16:56,952 - server - INFO - User None listed 5 channels
2025-03-09 13:16:56,966 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:56] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:16:57,194 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:16:57,256 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:16:58,072 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:16:58,072 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:16:58] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:17:08,270 - server - INFO - User None listed 0 pending channels
2025-03-09 13:17:08,280 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:08] "GET /pending HTTP/1.1" 200 -
2025-03-09 13:17:08,448 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:08] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:17:08,450 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:08] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:17:09,370 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:17:09,370 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:09] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:17:13,526 - server - INFO - User None accessed dashboard with 5 channels and 0 pending applications
2025-03-09 13:17:13,527 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:13] "GET / HTTP/1.1" 200 -
2025-03-09 13:17:13,694 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:17:13,813 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:13] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:17:14,644 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:17:14,644 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:17:41,605 - handlers.channel - INFO - User 8106482945 requested settings
2025-03-09 13:17:41,605 - handlers.channel - INFO - Found 0 approved channels for user 8106482945
2025-03-09 13:17:42,124 - handlers.channel - INFO - No approved channels found for user 8106482945
2025-03-09 13:17:45,532 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:17:45,532 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:17:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:18:14,657 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:18:14,657 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:18:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:18:45,086 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:18:45,086 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:18:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:19:14,661 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:19:14,663 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:19:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:19:44,658 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:19:44,658 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:19:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:20:04,904 - server - INFO - User None listed 5 channels
2025-03-09 13:20:04,905 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:04] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:20:05,187 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:20:05,574 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:05] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:20:06,134 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:20:06,134 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:06] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:20:07,747 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:07] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 13:20:07,913 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:20:07,985 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:07] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:20:08,686 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:20:08,686 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:08] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:20:12,912 - server - INFO - User None listed 5 channels
2025-03-09 13:20:12,913 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:12] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:20:13,071 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:20:13,195 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:13] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:20:13,999 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:20:13,999 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:13] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:20:32,201 - server - INFO - User None accessed dashboard with 5 channels and 0 pending applications
2025-03-09 13:20:32,202 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:32] "GET / HTTP/1.1" 200 -
2025-03-09 13:20:32,368 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:20:32,487 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:32] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:20:33,303 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:20:33,304 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:20:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:21:03,012 - handlers.channel - INFO - User 8106482945 started channel application process
2025-03-09 13:21:03,192 - handlers.channel - INFO - Set state to waiting_channel_name for user 8106482945
2025-03-09 13:21:03,613 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:21:03,613 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:03] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:21:05,926 - handlers.channel - INFO - Handling waiting_channel_name state for user 8106482945
2025-03-09 13:21:05,926 - handlers.channel - INFO - Processing channel name for user 8106482945: Memes
2025-03-09 13:21:05,926 - handlers.channel - INFO - Stored channel title 'Memes' for user 8106482945
2025-03-09 13:21:06,284 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 13:21:06,284 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 13:21:07,436 - handlers.channel - INFO - Handling waiting_channel_url state for user 8106482945
2025-03-09 13:21:07,436 - handlers.channel - INFO - Processing channel URL for user 8106482945: @mrmes23
2025-03-09 13:21:07,436 - handlers.channel - INFO - Stored channel username 'mrmes23' for user 8106482945
2025-03-09 13:21:07,589 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 13:21:07,589 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 13:21:11,683 - handlers.channel - INFO - Handling waiting_emoji state for user 8106482945
2025-03-09 13:21:11,683 - handlers.channel - INFO - Processing emoji selection for user 8106482945
2025-03-09 13:21:11,683 - handlers.channel - INFO - Found emojis: ['🇺🇦', '💻', '🎮']
2025-03-09 13:21:11,683 - handlers.channel - INFO - Stored emojis ['🇺🇦', '💻', '🎮'] for user 8106482945
2025-03-09 13:21:11,826 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-09 13:21:11,826 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-09 13:21:33,207 - handlers.channel - INFO - Handling waiting_admin_verification state for user 8106482945
2025-03-09 13:21:33,207 - handlers.channel - INFO - Processing admin verification for user 8106482945
2025-03-09 13:21:33,207 - handlers.channel - INFO - Channel data so far: {'title': 'Memes', 'username': 'mrmes23', 'emojis': ['🇺🇦', '💻', '🎮']}
2025-03-09 13:21:33,207 - handlers.channel - INFO - Skipping admin verification check for now
2025-03-09 13:21:33,360 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_admin_verification
2025-03-09 13:21:33,360 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_admin_verification to ChannelStates:waiting_post_forward
2025-03-09 13:21:33,540 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:21:33,540 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:21:38,147 - handlers.channel - INFO - Handling waiting_post_forward state for user 8106482945
2025-03-09 13:21:38,147 - handlers.channel - INFO - Processing forwarded post from user 8106482945
2025-03-09 13:21:38,147 - handlers.channel - INFO - Message details: forward_from_chat={'id': -1002280664118, 'type': 'channel', 'title': 'Memes', 'username': 'mrmes23', 'first_name': None, 'last_name': None, 'is_forum': None, 'max_reaction_count': None, 'photo': None, 'bio': None, 'join_to_send_messages': None, 'join_by_request': None, 'has_private_forwards': None, 'has_restricted_voice_and_video_messages': None, 'description': None, 'invite_link': None, 'pinned_message': None, 'permissions': None, 'slow_mode_delay': None, 'message_auto_delete_time': None, 'has_protected_content': None, 'sticker_set_name': None, 'can_set_sticker_set': None, 'linked_chat_id': None, 'location': None, 'active_usernames': None, 'emoji_status_custom_emoji_id': None, 'has_hidden_members': None, 'has_aggressive_anti_spam_enabled': None, 'emoji_status_expiration_date': None, 'available_reactions': None, 'accent_color_id': None, 'background_custom_emoji_id': None, 'profile_accent_color_id': None, 'profile_background_custom_emoji_id': None, 'has_visible_history': None, 'unrestrict_boost_count': None, 'custom_emoji_sticker_set_name': None, 'business_intro': None, 'business_location': None, 'business_opening_hours': None, 'personal_chat': None, 'birthdate': None, 'can_send_paid_media': None}
2025-03-09 13:21:38,147 - handlers.channel - INFO - Chat type: channel
2025-03-09 13:21:38,147 - handlers.channel - INFO - Processing channel: -1002280664118 - Memes
2025-03-09 13:21:42,052 - server - INFO - User None accessed dashboard with 5 channels and 1 pending applications
2025-03-09 13:21:42,053 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:42] "GET / HTTP/1.1" 200 -
2025-03-09 13:21:42,209 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:42] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:21:42,338 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:42] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:21:43,145 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:21:43,146 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:21:46,435 - server - INFO - User None listed 1 pending channels
2025-03-09 13:21:46,435 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:46] "GET /pending HTTP/1.1" 200 -
2025-03-09 13:21:46,604 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:46] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:21:46,604 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:46] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:21:47,410 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:21:47,410 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:47] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:21:49,272 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:49] "GET /pending/-1002280664118 HTTP/1.1" 200 -
2025-03-09 13:21:49,435 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:49] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:21:49,435 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:21:50,226 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:21:50,226 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:21:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:22:20,243 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:22:20,243 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:22:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:22:50,243 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:22:50,243 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:22:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:23:20,254 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:23:20,255 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:23:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:23:50,247 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:23:50,247 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:23:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:24:20,248 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:24:20,248 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:24:50,249 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:24:50,249 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:24:52,375 - server - INFO - User None accessed dashboard with 5 channels and 1 pending applications
2025-03-09 13:24:52,376 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:52] "GET / HTTP/1.1" 200 -
2025-03-09 13:24:52,536 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:24:52,666 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:24:53,472 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:24:53,472 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:53] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:24:58,910 - server - INFO - User None listed 1 pending channels
2025-03-09 13:24:58,910 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:58] "GET /pending HTTP/1.1" 200 -
2025-03-09 13:24:59,069 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:59] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:24:59,069 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:59] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:24:59,906 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:24:59,907 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:24:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:25:00,871 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:25:00] "GET /pending/-1002280664118 HTTP/1.1" 200 -
2025-03-09 13:25:01,035 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:25:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:25:01,035 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:25:01] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:25:01,563 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:25:01,563 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:25:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:25:31,669 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:25:31,669 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:25:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:26:01,586 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:26:01,587 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:26:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:26:31,579 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:26:31,579 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:26:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:27:01,598 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:27:01,599 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:27:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:27:31,581 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:27:31,582 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:27:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:27:34,561 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:27:34,561 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:27:37,975 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:27:37,976 - __main__ - INFO - Running as user: runner
2025-03-09 13:27:37,976 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:27:37,976 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:27:37,976 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:27:37,976 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:27:37,976 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:27:37,976 - __main__ - INFO - Importing bot module...
2025-03-09 13:27:38,145 - bot - INFO - Bot initialized with state storage
2025-03-09 13:27:38,145 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:27:38,145 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:27:38,145 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:27:38,145 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:27:38,146 - __main__ - INFO - Initializing bot...
2025-03-09 13:27:38,147 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:27:38,147 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:27:38,537 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:27:38,538 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:27:38,539 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:27:38,540 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:27:38,540 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:27:38,541 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:27:38,541 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:27:38,541 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:27:39,908 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:27:39,908 - bot - INFO - Bot started
2025-03-09 13:27:39,908 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:27:39,908 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:27:39,909 - __main__ - INFO - Starting bot thread...
2025-03-09 13:27:39,910 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:27:39,913 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:27:39,914 - __main__ - INFO - Watchdog thread started
2025-03-09 13:27:39,915 - __main__ - INFO - Watchdog thread started
2025-03-09 13:27:39,916 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:27:39,917 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:27:39,941 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:27:39,942 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:27:40,271 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:27:40] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:27:40,306 - server - INFO - User None accessed admin dashboard with 5 channels and 1 pending applications
2025-03-09 13:27:40,335 - server - ERROR - Exception on / [GET]
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 73, in decorated
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/server.py", line 114, in index
    return render_template('index.html',
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/runner/workspace/templates/index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/runner/workspace/templates/base.html", line 63, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/templates/index.html", line 52, in block 'content'
    <a href="{{ url_for('trigger_post') }}" class="btn btn-primary d-flex flex-column align-items-center justify-content-center p-4 h-100">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/flask/app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'trigger_post'. Did you mean 'view_pending' instead?
2025-03-09 13:27:40,360 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:27:40] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-03-09 13:29:28,961 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:29:28,961 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:29:32,559 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:29:32,559 - __main__ - INFO - Running as user: runner
2025-03-09 13:29:32,560 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:29:32,560 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:29:32,560 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:29:32,560 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:29:32,560 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:29:32,560 - __main__ - INFO - Importing bot module...
2025-03-09 13:29:32,561 - bot - INFO - Bot initialized with state storage
2025-03-09 13:29:32,561 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:29:32,562 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:29:32,562 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:29:32,562 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:29:32,562 - __main__ - INFO - Initializing bot...
2025-03-09 13:29:32,563 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:29:32,564 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:29:33,026 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:29:33,027 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:29:33,028 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:29:33,029 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:29:33,029 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:29:33,030 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:29:33,030 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:29:33,030 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:29:34,810 - utils.crosspost - INFO - Successfully updated subscriber counts for 5 channels
2025-03-09 13:29:34,810 - bot - INFO - Bot started
2025-03-09 13:29:34,810 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:29:34,810 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:29:34,811 - __main__ - INFO - Starting bot thread...
2025-03-09 13:29:34,811 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:29:34,811 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:29:34,813 - __main__ - INFO - Watchdog thread started
2025-03-09 13:29:34,814 - __main__ - INFO - Watchdog thread started
2025-03-09 13:29:34,814 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:29:34,814 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:29:34,829 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:29:34,829 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:29:35,197 - server - INFO - User None accessed admin dashboard with 5 channels and 1 pending applications
2025-03-09 13:29:35,223 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:35] "GET / HTTP/1.1" 200 -
2025-03-09 13:29:35,461 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:29:35,522 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:35] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:29:36,449 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:29:36,450 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:36] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:29:42,777 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:42] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:29:43,573 - server - INFO - User None accessed admin dashboard with 5 channels and 1 pending applications
2025-03-09 13:29:43,574 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:43] "GET / HTTP/1.1" 200 -
2025-03-09 13:29:43,733 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:29:43,874 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:29:44,653 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:29:44,654 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:29:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:00,046 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:00] "GET /pending/-1002280664118 HTTP/1.1" 200 -
2025-03-09 13:30:00,203 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:00] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:00,205 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:00] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:01,034 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:01,034 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:05,391 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:05] "[32mPOST /pending/-1002280664118 HTTP/1.1[0m" 302 -
2025-03-09 13:30:05,551 - server - INFO - User None listed 6 channels
2025-03-09 13:30:05,563 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:05] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:30:05,728 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:05] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:05,864 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:05] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:06,678 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:06,679 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:06] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:14,291 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:30:14,291 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:14] "GET / HTTP/1.1" 200 -
2025-03-09 13:30:14,456 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:14] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:14,588 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:14] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:15,387 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:15,388 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:15] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:19,566 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:30:21,386 - utils.crosspost - INFO - Successfully updated subscriber counts for 6 channels
2025-03-09 13:30:21,386 - server - INFO - User None updated subscriber counts
2025-03-09 13:30:21,387 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:21] "[32mGET /update_subscribers HTTP/1.1[0m" 302 -
2025-03-09 13:30:21,532 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:30:21,533 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:21] "GET / HTTP/1.1" 200 -
2025-03-09 13:30:21,700 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:21,833 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:21] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:22,637 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:22,637 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:32,141 - server - INFO - User None listed 6 channels
2025-03-09 13:30:32,143 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:32] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:30:32,307 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:32,436 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:32] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:33,369 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:33,369 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:39,738 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:30:39,740 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:39] "GET / HTTP/1.1" 200 -
2025-03-09 13:30:39,905 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:40,037 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:40] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:40,857 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:40,858 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:44,004 - server - INFO - User None listed 6 channels
2025-03-09 13:30:44,005 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:44] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:30:44,166 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:44,300 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:44] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:45,087 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:45,087 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:54,472 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:30:54,473 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:54] "GET / HTTP/1.1" 200 -
2025-03-09 13:30:54,640 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:54] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:54,766 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:54] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:55,587 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:55,587 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:55] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:30:57,143 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:57] "GET /manage_images HTTP/1.1" 200 -
2025-03-09 13:30:57,309 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:57] "GET /generated-icon.png HTTP/1.1" 200 -
2025-03-09 13:30:57,316 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:57] "GET /nsfw-icon.png HTTP/1.1" 200 -
2025-03-09 13:30:57,450 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:30:57,765 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:30:58,100 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:30:58,100 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:30:58] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:31:07,554 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:31:07,555 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:07] "GET / HTTP/1.1" 200 -
2025-03-09 13:31:07,719 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:07] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:31:07,851 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:07] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:31:08,643 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:31:08,643 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:08] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:31:17,738 - server - INFO - User None listed 0 pending channels
2025-03-09 13:31:17,753 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:17] "GET /pending HTTP/1.1" 200 -
2025-03-09 13:31:17,925 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:17] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:31:17,926 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:17] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:31:18,859 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:31:18,859 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:18] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:31:20,918 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:31:20,919 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:20] "GET / HTTP/1.1" 200 -
2025-03-09 13:31:21,083 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:21] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:31:21,220 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:21] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:31:22,003 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:31:22,003 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:31:36,529 - server - INFO - User None listed 6 channels
2025-03-09 13:31:36,531 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:36] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:31:36,698 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:31:36,830 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:31:37,645 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:31:37,646 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:37] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:31:39,489 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:39] "GET /channels/-1002467496944/edit HTTP/1.1" 200 -
2025-03-09 13:31:39,654 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:31:39,655 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:31:40,466 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:31:40,467 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:31:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:32:10,483 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:32:10,483 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:32:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:32:40,487 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:32:40,487 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:32:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:33:10,482 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:33:10,483 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:33:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:33:40,482 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:33:40,483 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:33:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:34:10,061 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:34:10,061 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 13:34:10,493 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:34:10,493 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:34:13,923 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 13:34:13,923 - __main__ - INFO - Running as user: runner
2025-03-09 13:34:13,923 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 13:34:13,923 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 13:34:13,923 - __main__ - INFO - Running under uWSGI: False
2025-03-09 13:34:13,923 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 13:34:13,923 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 13:34:13,924 - __main__ - INFO - Importing bot module...
2025-03-09 13:34:13,925 - bot - INFO - Bot initialized with state storage
2025-03-09 13:34:13,925 - __main__ - INFO - Bot module imported successfully
2025-03-09 13:34:13,925 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 13:34:13,925 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 13:34:13,926 - __main__ - INFO - Successfully imported bot module
2025-03-09 13:34:13,926 - __main__ - INFO - Initializing bot...
2025-03-09 13:34:13,932 - handlers.channel - INFO - Channel handlers registered
2025-03-09 13:34:13,932 - handlers.admin - INFO - Admin handlers registered
2025-03-09 13:34:14,329 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 13:34:14,331 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 13:34:14,331 - utils.scheduler - INFO - Scheduler started
2025-03-09 13:34:14,332 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 13:34:14,332 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 13:34:14,333 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 13:34:14,334 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 13:34:14,334 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 13:34:16,091 - utils.crosspost - INFO - Successfully updated subscriber counts for 6 channels
2025-03-09 13:34:16,091 - bot - INFO - Bot started
2025-03-09 13:34:16,091 - __main__ - INFO - Bot instance created successfully
2025-03-09 13:34:16,091 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 13:34:16,092 - __main__ - INFO - Starting bot thread...
2025-03-09 13:34:16,092 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 13:34:16,093 - __main__ - INFO - Bot thread started successfully
2025-03-09 13:34:16,094 - __main__ - INFO - Watchdog thread started
2025-03-09 13:34:16,094 - __main__ - INFO - Watchdog thread started
2025-03-09 13:34:16,094 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 13:34:16,094 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 13:34:16,107 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 13:34:16,108 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 13:34:16,403 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:16] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:34:16,444 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:34:16,469 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:16] "GET / HTTP/1.1" 200 -
2025-03-09 13:34:16,633 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:34:16,771 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:34:17,617 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:34:17,618 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:34:47,702 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:34:47,703 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:47] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:34:51,581 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:51] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 13:34:52,316 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:34:52,317 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:52] "GET / HTTP/1.1" 200 -
2025-03-09 13:34:52,476 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:34:52,615 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:34:53,404 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:34:53,404 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:34:53] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:06,282 - server - INFO - User None listed 6 channels
2025-03-09 13:35:06,295 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:06] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:35:06,463 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:06] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:06,588 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:06] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:07,438 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:07,438 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:07] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:08,950 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:08] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 13:35:09,116 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:09] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:09,117 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:09] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:09,891 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:09,891 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:09] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:11,688 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:11] "[32mPOST /channels/-1002204399883/edit HTTP/1.1[0m" 302 -
2025-03-09 13:35:11,844 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:11] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-09 13:35:12,007 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:12] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:12,026 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:12] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:12,932 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:12,932 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:12] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:16,570 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:16] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 13:35:16,737 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:16,737 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:16] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:17,530 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:17,531 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:17] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:19,174 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:19] "[32mPOST /channels/-1002204399883/edit HTTP/1.1[0m" 302 -
2025-03-09 13:35:19,318 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:19] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-09 13:35:19,484 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:19] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:19,486 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:19] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:20,402 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:20,403 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:22,394 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:22] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 13:35:22,557 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:22,558 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:22] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:23,362 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:23,363 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:23] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:24,897 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:24] "[32mPOST /channels/-1002204399883/edit HTTP/1.1[0m" 302 -
2025-03-09 13:35:25,053 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:25] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-09 13:35:25,230 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:35:25,232 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:25] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:35:26,030 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:26,031 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:26] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:35:35,289 - handlers.channel - INFO - User 8106482945 requested settings
2025-03-09 13:35:35,289 - handlers.channel - INFO - Found 1 approved channels for user 8106482945
2025-03-09 13:35:35,289 - handlers.channel - INFO - Added channel -1002280664118: Memes to menu for user 8106482945
2025-03-09 13:35:49,751 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 13:35:49,752 - handlers.channel - INFO - Found 0 approved channels for user 1336308262
2025-03-09 13:35:50,280 - handlers.channel - INFO - No approved channels found for user 1336308262
2025-03-09 13:35:56,568 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:35:56,571 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:35:56] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:01,112 - server - INFO - User None accessed admin dashboard with 6 channels and 0 pending applications
2025-03-09 13:36:01,113 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:01] "GET / HTTP/1.1" 200 -
2025-03-09 13:36:01,276 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:01] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:01,486 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:01] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:02,231 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:02,232 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:02] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:04,114 - server - INFO - User None listed 6 channels
2025-03-09 13:36:04,116 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:04] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:04,278 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:04] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:04,407 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:04] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:05,204 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:05,204 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:05] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:22,360 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:22] "GET /channels/-1002204399883/edit HTTP/1.1" 200 -
2025-03-09 13:36:22,530 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:22] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:22,530 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:22] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:23,363 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:23,363 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:23] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:28,287 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:28] "GET /channels/-1002204399883 HTTP/1.1" 200 -
2025-03-09 13:36:28,454 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:28] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:28,455 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:28] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:29,241 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:29,241 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:32,351 - server - INFO - User None listed 6 channels
2025-03-09 13:36:32,352 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:32] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:32,531 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:32] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:32,643 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:32] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:33,463 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:33,463 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:34,953 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:34] "GET /channels/-1002204399883/remove HTTP/1.1" 200 -
2025-03-09 13:36:35,118 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:35] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:35,120 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:35] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:35,905 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:35,905 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:35] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:36,691 - server - INFO - Channel -1002204399883 removed by user None
2025-03-09 13:36:36,692 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:36] "[32mPOST /channels/-1002204399883/remove HTTP/1.1[0m" 302 -
2025-03-09 13:36:36,840 - server - INFO - User None listed 5 channels
2025-03-09 13:36:36,841 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:36] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:36,998 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:36,999 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:36] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:37,570 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:37,570 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:37] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:38,395 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:38] "GET /channels/-1002467496944/remove HTTP/1.1" 200 -
2025-03-09 13:36:38,562 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:38] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:38,564 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:38] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:39,104 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:39,104 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:39,798 - server - INFO - Channel -1002467496944 removed by user None
2025-03-09 13:36:39,799 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:39] "[32mPOST /channels/-1002467496944/remove HTTP/1.1[0m" 302 -
2025-03-09 13:36:39,943 - server - INFO - User None listed 4 channels
2025-03-09 13:36:39,944 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:39] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:40,108 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:40] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:40,109 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:40] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:40,614 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:40,614 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:41,383 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:41] "GET /channels/-1002357763694/remove HTTP/1.1" 200 -
2025-03-09 13:36:41,552 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:41] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:41,552 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:41] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:42,061 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:42,061 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:42] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:42,692 - server - INFO - Channel -1002357763694 removed by user None
2025-03-09 13:36:42,693 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:42] "[32mPOST /channels/-1002357763694/remove HTTP/1.1[0m" 302 -
2025-03-09 13:36:42,837 - server - INFO - User None listed 3 channels
2025-03-09 13:36:42,838 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:42] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:43,019 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:43,020 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:43,408 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:43,408 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:44,118 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:44] "GET /channels/-1002487566547/remove HTTP/1.1" 200 -
2025-03-09 13:36:44,289 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:44] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:44,290 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:44] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:44,701 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:44,702 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:45,324 - server - INFO - Channel -1002487566547 removed by user None
2025-03-09 13:36:45,325 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:45] "[32mPOST /channels/-1002487566547/remove HTTP/1.1[0m" 302 -
2025-03-09 13:36:45,470 - server - INFO - User None listed 2 channels
2025-03-09 13:36:45,471 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:45] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:45,634 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:45] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:45,635 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:45] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:46,016 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:46,016 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:47,353 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:47] "GET /channels/-1002297658240/remove HTTP/1.1" 200 -
2025-03-09 13:36:47,520 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:47] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:47,521 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:48,067 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:48,067 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:48] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:48,728 - server - INFO - Channel -1002297658240 removed by user None
2025-03-09 13:36:48,728 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:48] "[32mPOST /channels/-1002297658240/remove HTTP/1.1[0m" 302 -
2025-03-09 13:36:48,877 - server - INFO - User None listed 1 channels
2025-03-09 13:36:48,878 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:48] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:36:49,044 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:49] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:36:49,045 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:49] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:36:49,428 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:36:49,428 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:36:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:36:56,087 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 13:36:56,233 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 13:37:02,288 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 13:37:02,289 - handlers.channel - INFO - Processing channel name for user 1336308262: Testing SFW
2025-03-09 13:37:02,289 - handlers.channel - INFO - Stored channel title 'Testing SFW' for user 1336308262
2025-03-09 13:37:02,523 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 13:37:02,524 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 13:37:11,556 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-09 13:37:11,556 - handlers.channel - INFO - Processing channel URL for user 1336308262: @testingnotyiff
2025-03-09 13:37:11,556 - handlers.channel - INFO - Stored channel username 'testingnotyiff' for user 1336308262
2025-03-09 13:37:11,708 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 13:37:11,708 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 13:37:16,015 - handlers.channel - INFO - Handling waiting_emoji state for user 1336308262
2025-03-09 13:37:16,015 - handlers.channel - INFO - Processing emoji selection for user 1336308262
2025-03-09 13:37:16,016 - handlers.channel - INFO - Found emojis: ['🇺🇦', '💻', '🎮']
2025-03-09 13:37:16,016 - handlers.channel - INFO - Stored emojis ['🇺🇦', '💻', '🎮'] for user 1336308262
2025-03-09 13:37:16,174 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-09 13:37:16,174 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-09 13:37:18,219 - handlers.channel - INFO - Handling waiting_admin_verification state for user 1336308262
2025-03-09 13:37:18,220 - handlers.channel - INFO - Processing admin verification for user 1336308262
2025-03-09 13:37:18,220 - handlers.channel - INFO - Channel data so far: {'title': 'Testing SFW', 'username': 'testingnotyiff', 'emojis': ['🇺🇦', '💻', '🎮']}
2025-03-09 13:37:18,220 - handlers.channel - INFO - Skipping admin verification check for now
2025-03-09 13:37:18,379 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_admin_verification
2025-03-09 13:37:18,379 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_admin_verification to ChannelStates:waiting_post_forward
2025-03-09 13:37:19,344 - handlers.channel - INFO - Handling waiting_post_forward state for user 1336308262
2025-03-09 13:37:19,344 - handlers.channel - INFO - Processing forwarded post from user 1336308262
2025-03-09 13:37:19,345 - handlers.channel - INFO - Message details: forward_from_chat=None
2025-03-09 13:37:19,345 - handlers.channel - INFO - Chat type: unknown
2025-03-09 13:37:19,508 - handlers.channel - WARNING - User 1336308262 sent a message that is not a forward from a channel
2025-03-09 13:37:19,569 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:37:19,569 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:37:27,546 - handlers.channel - INFO - Handling waiting_post_forward state for user 1336308262
2025-03-09 13:37:27,546 - handlers.channel - INFO - Processing forwarded post from user 1336308262
2025-03-09 13:37:27,546 - handlers.channel - INFO - Message details: forward_from_chat={'id': -1002467496944, 'type': 'channel', 'title': 'Тестуємо SFW', 'username': 'testingnotyiff', 'first_name': None, 'last_name': None, 'is_forum': None, 'max_reaction_count': None, 'photo': None, 'bio': None, 'join_to_send_messages': None, 'join_by_request': None, 'has_private_forwards': None, 'has_restricted_voice_and_video_messages': None, 'description': None, 'invite_link': None, 'pinned_message': None, 'permissions': None, 'slow_mode_delay': None, 'message_auto_delete_time': None, 'has_protected_content': None, 'sticker_set_name': None, 'can_set_sticker_set': None, 'linked_chat_id': None, 'location': None, 'active_usernames': None, 'emoji_status_custom_emoji_id': None, 'has_hidden_members': None, 'has_aggressive_anti_spam_enabled': None, 'emoji_status_expiration_date': None, 'available_reactions': None, 'accent_color_id': None, 'background_custom_emoji_id': None, 'profile_accent_color_id': None, 'profile_background_custom_emoji_id': None, 'has_visible_history': None, 'unrestrict_boost_count': None, 'custom_emoji_sticker_set_name': None, 'business_intro': None, 'business_location': None, 'business_opening_hours': None, 'personal_chat': None, 'birthdate': None, 'can_send_paid_media': None}
2025-03-09 13:37:27,546 - handlers.channel - INFO - Chat type: channel
2025-03-09 13:37:27,546 - handlers.channel - INFO - Processing channel: -1002467496944 - Тестуємо SFW
2025-03-09 13:37:30,061 - server - INFO - User None accessed admin dashboard with 1 channels and 1 pending applications
2025-03-09 13:37:30,062 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:30] "GET / HTTP/1.1" 200 -
2025-03-09 13:37:30,230 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:30] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:37:30,355 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:30] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:37:31,152 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:37:31,153 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:37:33,232 - server - INFO - User None listed 1 pending channels
2025-03-09 13:37:33,251 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:33] "GET /pending HTTP/1.1" 200 -
2025-03-09 13:37:33,428 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:37:33,429 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:33] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:37:34,240 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:37:34,241 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:34] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:37:37,471 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:37] "GET /pending/-1002467496944 HTTP/1.1" 200 -
2025-03-09 13:37:37,642 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:37] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:37:37,645 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:37:38,458 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:37:38,458 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:38] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:37:39,288 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:39] "[32mPOST /pending/-1002467496944 HTTP/1.1[0m" 302 -
2025-03-09 13:37:39,432 - server - INFO - User None listed 2 channels
2025-03-09 13:37:39,433 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:39] "GET /channels HTTP/1.1" 200 -
2025-03-09 13:37:39,601 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:37:39,602 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:39] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:37:40,135 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:37:40,135 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:37:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:37:45,341 - handlers.channel - INFO - User 1336308262 requested settings
2025-03-09 13:37:45,342 - handlers.channel - INFO - Found 1 approved channels for user 1336308262
2025-03-09 13:37:45,342 - handlers.channel - INFO - Added channel -1002467496944: Testing SFW to menu for user 1336308262
2025-03-09 13:37:46,560 - handlers.channel - INFO - Handling callback query: settings_-1002467496944
2025-03-09 13:37:46,560 - handlers.channel - INFO - Callback query: settings_-1002467496944
2025-03-09 13:37:49,825 - handlers.channel - INFO - Handling callback query: info_-1002467496944
2025-03-09 13:37:49,825 - handlers.channel - INFO - Callback query: info_-1002467496944
2025-03-09 13:37:52,331 - handlers.channel - INFO - Handling callback query: settings_-1002467496944
2025-03-09 13:37:52,331 - handlers.channel - INFO - Callback query: settings_-1002467496944
2025-03-09 13:38:08,874 - handlers.channel - INFO - User 1336308262 requested channel status
2025-03-09 13:38:08,875 - handlers.channel - INFO - Found 1 approved and 0 pending channels for user 1336308262
2025-03-09 13:38:10,583 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:38:10,584 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:10] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:38:11,979 - handlers.channel - INFO - User 1336308262 cancelled operation
2025-03-09 13:38:18,162 - handlers.channel - INFO - User 1336308262 requested schedule management
2025-03-09 13:38:18,162 - handlers.channel - INFO - Found 1 approved channels for user 1336308262
2025-03-09 13:38:18,163 - handlers.channel - INFO - Added channel -1002467496944: Testing SFW to schedule menu for user 1336308262
2025-03-09 13:38:19,447 - handlers.channel - INFO - Handling callback query: schedule_-1002467496944
2025-03-09 13:38:19,448 - handlers.channel - INFO - Callback query: schedule_-1002467496944
2025-03-09 13:38:20,611 - handlers.channel - INFO - Handling callback query: toggle_day_-1002467496944_6
2025-03-09 13:38:20,611 - handlers.channel - INFO - Callback query: toggle_day_-1002467496944_6
2025-03-09 13:38:20,611 - utils.storage - INFO - Toggled schedule for channel -1002467496944 on day 6 to False
2025-03-09 13:38:21,735 - handlers.channel - INFO - Handling callback query: toggle_day_-1002467496944_6
2025-03-09 13:38:21,735 - handlers.channel - INFO - Callback query: toggle_day_-1002467496944_6
2025-03-09 13:38:21,736 - utils.storage - INFO - Toggled schedule for channel -1002467496944 on day 6 to True
2025-03-09 13:38:22,859 - handlers.channel - INFO - Handling callback query: toggle_day_-1002467496944_5
2025-03-09 13:38:22,859 - handlers.channel - INFO - Callback query: toggle_day_-1002467496944_5
2025-03-09 13:38:22,860 - utils.storage - INFO - Toggled schedule for channel -1002467496944 on day 5 to False
2025-03-09 13:38:23,983 - handlers.channel - INFO - Handling callback query: toggle_day_-1002467496944_5
2025-03-09 13:38:23,983 - handlers.channel - INFO - Callback query: toggle_day_-1002467496944_5
2025-03-09 13:38:23,984 - utils.storage - INFO - Toggled schedule for channel -1002467496944 on day 5 to True
2025-03-09 13:38:25,106 - handlers.channel - INFO - Handling callback query: settings_-1002467496944
2025-03-09 13:38:25,106 - handlers.channel - INFO - Callback query: settings_-1002467496944
2025-03-09 13:38:40,589 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:38:40,589 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:40] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:38:52,633 - server - INFO - User None accessed admin dashboard with 2 channels and 0 pending applications
2025-03-09 13:38:52,634 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:52] "GET / HTTP/1.1" 200 -
2025-03-09 13:38:52,796 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:52] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:38:52,913 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:52] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:38:53,708 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:38:53,708 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:53] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:38:54,862 - utils.scheduler - INFO - Scheduling immediate crosspost
2025-03-09 13:38:54,863 - utils.scheduler - INFO - Found 2 active channels for immediate crosspost
2025-03-09 13:38:54,863 - utils.crosspost - INFO - Creating crosspost for 2 active channels
2025-03-09 13:38:55,736 - utils.crosspost - INFO - Found 2 small channels (<300 subscribers) and 0 large channels
2025-03-09 13:38:55,736 - utils.crosspost - INFO - Found 0 channels with reserved positions for SFW content
2025-03-09 13:38:55,736 - utils.crosspost - INFO - Only 2 channels available, using all of them
2025-03-09 13:38:55,864 - utils.crosspost - INFO - Preparing SFW crosspost for 2 channels
2025-03-09 13:38:56,714 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002280664118 (excluding itself from list)
2025-03-09 13:38:56,947 - utils.crosspost - INFO - Sent SFW crosspost to channel -1002467496944 (excluding itself from list)
2025-03-09 13:38:56,947 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-09 13:38:56,947 - utils.scheduler - INFO - Successfully executed manual crosspost
2025-03-09 13:38:56,947 - server - INFO - User None triggered a manual crosspost
2025-03-09 13:38:56,948 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:56] "[32mGET /trigger_post HTTP/1.1[0m" 302 -
2025-03-09 13:38:57,092 - server - INFO - User None accessed admin dashboard with 2 channels and 0 pending applications
2025-03-09 13:38:57,093 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:57] "GET / HTTP/1.1" 200 -
2025-03-09 13:38:57,257 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:57] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 13:38:57,378 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:57] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 13:38:58,185 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:38:58,185 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:38:58] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:39:28,641 - server - INFO - User None retrieved stats with scope: network
2025-03-09 13:39:28,641 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 13:39:28] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 13:39:42,321 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 13:39:42,321 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:24:24,247 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:24:24,248 - __main__ - INFO - Running as user: runner
2025-03-09 15:24:24,248 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:24:24,248 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:24:24,248 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:24:24,248 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:24:24,249 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:24:24,250 - __main__ - INFO - Importing bot module...
2025-03-09 15:24:24,253 - bot - INFO - Bot initialized with state storage
2025-03-09 15:24:24,253 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:24:24,253 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:24:24,253 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:24:24,254 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:24:24,254 - __main__ - INFO - Initializing bot...
2025-03-09 15:24:24,441 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:24:24,442 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:24:24,844 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:24:24,846 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:24:24,846 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:24:24,847 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:24:24,847 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:24:24,852 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:24:24,852 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:24:24,852 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:24:25,444 - utils.crosspost - INFO - Successfully updated subscriber counts for 2 channels
2025-03-09 15:24:25,444 - bot - INFO - Bot started
2025-03-09 15:24:25,444 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:24:25,444 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:24:25,444 - __main__ - INFO - Starting bot thread...
2025-03-09 15:24:25,445 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:24:25,445 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:24:25,447 - __main__ - INFO - Watchdog thread started
2025-03-09 15:24:25,447 - __main__ - INFO - Watchdog thread started
2025-03-09 15:24:25,448 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:24:25,448 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:24:25,462 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:24:25,462 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:24:31,553 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:24:31,554 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:24:37,465 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:24:37,466 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:24:44,139 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:24:44,140 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:24:49,336 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:24:49,337 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:24:57,514 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:24:57,514 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:25:08,682 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:25:08,683 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:25:12,298 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:25:12,299 - __main__ - INFO - Running as user: runner
2025-03-09 15:25:12,299 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:25:12,299 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:25:12,299 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:25:12,299 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:25:12,299 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:25:12,299 - __main__ - INFO - Importing bot module...
2025-03-09 15:25:12,300 - bot - INFO - Bot initialized with state storage
2025-03-09 15:25:12,300 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:25:12,301 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:25:12,301 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:25:12,301 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:25:12,301 - __main__ - INFO - Initializing bot...
2025-03-09 15:25:12,310 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:25:12,311 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:25:12,738 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:25:12,740 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:25:12,741 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:25:12,742 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:25:12,742 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:25:12,742 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:25:12,743 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:25:12,743 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:25:13,239 - utils.crosspost - INFO - Successfully updated subscriber counts for 2 channels
2025-03-09 15:25:13,239 - bot - INFO - Bot started
2025-03-09 15:25:13,239 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:25:13,239 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:25:13,240 - __main__ - INFO - Starting bot thread...
2025-03-09 15:25:13,240 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:25:13,240 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:25:13,243 - __main__ - INFO - Watchdog thread started
2025-03-09 15:25:13,244 - __main__ - INFO - Watchdog thread started
2025-03-09 15:25:13,244 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:25:13,244 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:25:13,267 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:25:13,267 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:25:14,099 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:14] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:25:28,979 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:28] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:25:30,221 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:30] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:25:32,128 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:25:32,129 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:25:44,421 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:44] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:25:47,588 - server - INFO - User None accessed admin dashboard with 2 channels and 0 pending applications
2025-03-09 15:25:47,621 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:47] "GET / HTTP/1.1" 200 -
2025-03-09 15:25:47,919 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:47] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:25:48,300 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:48] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:25:49,090 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:25:49,090 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:25:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:26:08,695 - handlers.channel - INFO - User 8106482945 started channel application process
2025-03-09 15:26:09,207 - handlers.channel - INFO - Set state to waiting_channel_name for user 8106482945
2025-03-09 15:26:10,581 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:10,582 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:16,252 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:16,253 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:19,621 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:26:19,622 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:26:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:26:22,408 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:22,409 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:29,590 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:29,591 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:35,750 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:35,752 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:45,921 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:26:45,922 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:26:49,623 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:26:49,623 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:26:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:27:04,081 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:27:04,082 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:27:19,626 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:27:19,626 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:27:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:27:31,169 - handlers.channel - INFO - User 897759308 started channel application process
2025-03-09 15:27:31,349 - handlers.channel - INFO - Set state to waiting_channel_name for user 897759308
2025-03-09 15:27:37,544 - handlers.channel - INFO - User 8106482945 started channel application process
2025-03-09 15:27:37,728 - handlers.channel - INFO - Set state to waiting_channel_name for user 8106482945
2025-03-09 15:27:40,207 - handlers.channel - INFO - Handling waiting_channel_name state for user 8106482945
2025-03-09 15:27:40,207 - handlers.channel - INFO - Processing channel name for user 8106482945: Memes
2025-03-09 15:27:40,207 - handlers.channel - INFO - Stored channel title 'Memes' for user 8106482945
2025-03-09 15:27:40,353 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:27:40,353 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:27:45,157 - handlers.channel - INFO - Handling waiting_channel_url state for user 8106482945
2025-03-09 15:27:45,157 - handlers.channel - INFO - Processing channel URL for user 8106482945: dreams_of_the_dragon
2025-03-09 15:27:45,157 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 8106482945
2025-03-09 15:27:45,279 - handlers.channel - ERROR - Error in channel_url_handler: A request to the Telegram API was unsuccessful. Error code: 400. Description: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 85
2025-03-09 15:27:49,489 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:27:49,489 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:27:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:27:50,190 - handlers.channel - INFO - Handling waiting_channel_name state for user 897759308
2025-03-09 15:27:50,190 - handlers.channel - INFO - Processing channel name for user 897759308: @Blacky_White_Shitpost
2025-03-09 15:27:50,191 - handlers.channel - INFO - Stored channel title '@Blacky_White_Shitpost' for user 897759308
2025-03-09 15:27:50,335 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:27:50,335 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:27:58,933 - handlers.channel - INFO - Handling waiting_channel_url state for user 897759308
2025-03-09 15:27:58,934 - handlers.channel - INFO - Processing channel URL for user 897759308: @Blacky_White_Shitpost
2025-03-09 15:27:58,934 - handlers.channel - INFO - Stored channel username 'Blacky_White_Shitpost' for user 897759308
2025-03-09 15:27:59,090 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 15:27:59,090 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 15:28:00,056 - handlers.channel - INFO - Handling waiting_channel_url state for user 8106482945
2025-03-09 15:28:00,057 - handlers.channel - INFO - Processing channel URL for user 8106482945: @dreams_of_the_dragon
2025-03-09 15:28:00,057 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 8106482945
2025-03-09 15:28:00,192 - handlers.channel - ERROR - Error in channel_url_handler: A request to the Telegram API was unsuccessful. Error code: 400. Description: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 85
2025-03-09 15:28:02,591 - handlers.channel - INFO - Handling waiting_emoji state for user 897759308
2025-03-09 15:28:02,591 - handlers.channel - INFO - Processing emoji selection for user 897759308
2025-03-09 15:28:02,591 - handlers.channel - INFO - User 897759308 cancelled operation
2025-03-09 15:28:04,591 - handlers.channel - INFO - User 897759308 started channel application process
2025-03-09 15:28:04,776 - handlers.channel - INFO - Set state to waiting_channel_name for user 897759308
2025-03-09 15:28:15,272 - handlers.channel - INFO - Handling waiting_channel_name state for user 897759308
2025-03-09 15:28:15,272 - handlers.channel - INFO - Processing channel name for user 897759308: Чорно-Білий Шітпост
2025-03-09 15:28:15,272 - handlers.channel - INFO - Stored channel title 'Чорно-Білий Шітпост' for user 897759308
2025-03-09 15:28:15,413 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:28:15,413 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:28:17,125 - handlers.channel - INFO - Handling waiting_channel_url state for user 897759308
2025-03-09 15:28:17,125 - handlers.channel - INFO - Processing channel URL for user 897759308: @Blacky_White_Shitpost
2025-03-09 15:28:17,125 - handlers.channel - INFO - Stored channel username 'Blacky_White_Shitpost' for user 897759308
2025-03-09 15:28:17,276 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 15:28:17,276 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 15:28:19,140 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:28:19,140 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:28:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:28:38,097 - handlers.channel - INFO - Handling waiting_emoji state for user 897759308
2025-03-09 15:28:38,097 - handlers.channel - INFO - Processing emoji selection for user 897759308
2025-03-09 15:28:38,098 - handlers.channel - INFO - Found emojis: ['💀🤣👌']
2025-03-09 15:28:38,098 - handlers.channel - INFO - Stored emojis ['💀🤣👌'] for user 897759308
2025-03-09 15:28:38,260 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-09 15:28:38,260 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-09 15:28:49,099 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:28:49,099 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:28:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:29:19,635 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:29:19,636 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:29:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:29:44,225 - handlers.channel - INFO - Handling waiting_admin_verification state for user 897759308
2025-03-09 15:29:44,225 - handlers.channel - INFO - Processing admin verification for user 897759308
2025-03-09 15:29:44,226 - handlers.channel - INFO - Channel data so far: {'title': 'Чорно-Білий Шітпост', 'username': 'Blacky_White_Shitpost', 'emojis': ['💀🤣👌']}
2025-03-09 15:29:44,226 - handlers.channel - INFO - Skipping admin verification check for now
2025-03-09 15:29:44,377 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_admin_verification
2025-03-09 15:29:44,378 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_admin_verification to ChannelStates:waiting_post_forward
2025-03-09 15:29:49,111 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:29:49,111 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:29:49] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:29:57,823 - handlers.channel - INFO - Handling waiting_post_forward state for user 897759308
2025-03-09 15:29:57,823 - handlers.channel - INFO - Processing forwarded post from user 897759308
2025-03-09 15:29:57,824 - handlers.channel - INFO - Message details: forward_from_chat={'id': -1001761783348, 'type': 'channel', 'title': 'Чорно-Білий Шітпост', 'username': 'Blacky_White_Shitpost', 'first_name': None, 'last_name': None, 'is_forum': None, 'max_reaction_count': None, 'photo': None, 'bio': None, 'join_to_send_messages': None, 'join_by_request': None, 'has_private_forwards': None, 'has_restricted_voice_and_video_messages': None, 'description': None, 'invite_link': None, 'pinned_message': None, 'permissions': None, 'slow_mode_delay': None, 'message_auto_delete_time': None, 'has_protected_content': None, 'sticker_set_name': None, 'can_set_sticker_set': None, 'linked_chat_id': None, 'location': None, 'active_usernames': None, 'emoji_status_custom_emoji_id': None, 'has_hidden_members': None, 'has_aggressive_anti_spam_enabled': None, 'emoji_status_expiration_date': None, 'available_reactions': None, 'accent_color_id': None, 'background_custom_emoji_id': None, 'profile_accent_color_id': None, 'profile_background_custom_emoji_id': None, 'has_visible_history': None, 'unrestrict_boost_count': None, 'custom_emoji_sticker_set_name': None, 'business_intro': None, 'business_location': None, 'business_opening_hours': None, 'personal_chat': None, 'birthdate': None, 'can_send_paid_media': None}
2025-03-09 15:29:57,824 - handlers.channel - INFO - Chat type: channel
2025-03-09 15:29:57,824 - handlers.channel - INFO - Processing channel: -1001761783348 - Чорно-Білий Шітпост
2025-03-09 15:30:19,105 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:30:19,105 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:30:23,467 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:30:23,467 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:30:27,271 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:30:27,271 - __main__ - INFO - Running as user: runner
2025-03-09 15:30:27,271 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:30:27,271 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:30:27,271 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:30:27,271 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:30:27,271 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:30:27,272 - __main__ - INFO - Importing bot module...
2025-03-09 15:30:27,273 - bot - INFO - Bot initialized with state storage
2025-03-09 15:30:27,274 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:30:27,274 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:30:27,274 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:30:27,274 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:30:27,274 - __main__ - INFO - Initializing bot...
2025-03-09 15:30:27,282 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:30:27,282 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:30:27,717 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:30:27,719 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:30:27,720 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:30:27,720 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:30:27,721 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:30:27,721 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:30:27,721 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:30:27,721 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:30:28,373 - utils.crosspost - INFO - Successfully updated subscriber counts for 2 channels
2025-03-09 15:30:28,373 - bot - INFO - Bot started
2025-03-09 15:30:28,373 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:30:28,373 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:30:28,373 - __main__ - INFO - Starting bot thread...
2025-03-09 15:30:28,374 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:30:28,376 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:30:28,376 - __main__ - INFO - Watchdog thread started
2025-03-09 15:30:28,376 - __main__ - INFO - Watchdog thread started
2025-03-09 15:30:28,376 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:30:28,376 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:30:28,393 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:30:28,393 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:30:28,775 - server - INFO - User None accessed admin dashboard with 2 channels and 1 pending applications
2025-03-09 15:30:28,817 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:28] "GET / HTTP/1.1" 200 -
2025-03-09 15:30:28,898 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:28] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:30:29,123 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:29] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:30:29,127 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:29] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:30:29,918 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:30:29,919 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:30:48,019 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:30:48,546 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:30:53,178 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:30:53,178 - handlers.channel - INFO - Processing channel name for user 1336308262: Dreams
2025-03-09 15:30:53,178 - handlers.channel - INFO - Stored channel title 'Dreams' for user 1336308262
2025-03-09 15:30:53,663 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:30:53,663 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:30:55,953 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-09 15:30:55,953 - handlers.channel - INFO - Processing channel URL for user 1336308262: dreams_of_the_dragon
2025-03-09 15:30:55,953 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 1336308262
2025-03-09 15:30:56,076 - handlers.channel - ERROR - Error in channel_url_handler: A request to the Telegram API was unsuccessful. Error code: 400. Description: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 86
2025-03-09 15:30:59,986 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:30:59,987 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:30:59] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:31:16,075 - handlers.channel - INFO - User 412018863 started channel application process
2025-03-09 15:31:16,223 - handlers.channel - INFO - Set state to waiting_channel_name for user 412018863
2025-03-09 15:31:29,933 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:31:29,933 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:31:29] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:31:44,652 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:31:44,652 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:31:48,925 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:31:48,925 - __main__ - INFO - Running as user: runner
2025-03-09 15:31:48,925 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:31:48,925 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:31:48,925 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:31:48,925 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:31:48,925 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:31:48,926 - __main__ - INFO - Importing bot module...
2025-03-09 15:31:48,929 - bot - INFO - Bot initialized with state storage
2025-03-09 15:31:48,930 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:31:48,932 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:31:48,932 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:31:48,932 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:31:48,933 - __main__ - INFO - Initializing bot...
2025-03-09 15:31:48,951 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:31:48,952 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:31:49,335 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:31:49,339 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:31:49,339 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:31:49,340 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:31:49,340 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:31:49,340 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:31:49,341 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:31:49,341 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:31:49,909 - utils.crosspost - INFO - Successfully updated subscriber counts for 2 channels
2025-03-09 15:31:49,911 - bot - INFO - Bot started
2025-03-09 15:31:49,912 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:31:49,912 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:31:49,912 - __main__ - INFO - Starting bot thread...
2025-03-09 15:31:49,914 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:31:49,914 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:31:49,917 - __main__ - INFO - Watchdog thread started
2025-03-09 15:31:49,917 - __main__ - INFO - Watchdog thread started
2025-03-09 15:31:49,917 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:31:49,917 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:31:49,936 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:31:49,936 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:31:50,299 - server - INFO - User None accessed admin dashboard with 2 channels and 1 pending applications
2025-03-09 15:31:50,358 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:31:50] "GET / HTTP/1.1" 200 -
2025-03-09 15:31:50,648 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:31:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:31:50,652 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:31:50] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:31:51,591 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:31:51,591 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:31:51] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:32:01,401 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:01] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:32:01,888 - server - INFO - User None accessed admin dashboard with 2 channels and 1 pending applications
2025-03-09 15:32:01,889 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:01] "GET / HTTP/1.1" 200 -
2025-03-09 15:32:02,128 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:32:02,183 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:02] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:32:02,984 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:32:02,985 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:02] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:32:22,647 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:32:23,086 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:32:25,921 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:32:25,922 - handlers.channel - INFO - Processing channel name for user 1336308262: dreams
2025-03-09 15:32:25,922 - handlers.channel - INFO - Stored channel title 'dreams' for user 1336308262
2025-03-09 15:32:26,138 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:32:26,138 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:32:27,045 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-09 15:32:27,045 - handlers.channel - INFO - Processing channel URL for user 1336308262: dreams_of_the_dragon
2025-03-09 15:32:27,045 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 1336308262
2025-03-09 15:32:27,281 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 15:32:27,281 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 15:32:33,580 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:32:33,581 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:32:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:32:43,482 - handlers.channel - INFO - Handling waiting_emoji state for user 1336308262
2025-03-09 15:32:43,482 - handlers.channel - INFO - Processing emoji selection for user 1336308262
2025-03-09 15:32:43,483 - handlers.channel - INFO - User 1336308262 cancelled operation
2025-03-09 15:32:46,177 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:32:46,370 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:32:54,623 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:32:54,624 - handlers.channel - INFO - Processing channel name for user 1336308262: @image_searcher
2025-03-09 15:32:54,624 - handlers.channel - INFO - Stored channel title '@image_searcher' for user 1336308262
2025-03-09 15:32:54,770 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:32:54,771 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:33:02,699 - server - INFO - User None listed 1 pending channels
2025-03-09 15:33:02,709 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:02] "GET /pending HTTP/1.1" 200 -
2025-03-09 15:33:02,875 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:02] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:02,876 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:02] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:03,723 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:03,724 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:03] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:13,587 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:13] "GET /pending/-1001761783348 HTTP/1.1" 200 -
2025-03-09 15:33:13,751 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:13] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:13,752 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:13] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:14,550 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:14,550 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:17,820 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:17] "[32mPOST /pending/-1001761783348 HTTP/1.1[0m" 302 -
2025-03-09 15:33:17,966 - server - INFO - User None listed 3 channels
2025-03-09 15:33:17,982 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:17] "GET /channels HTTP/1.1" 200 -
2025-03-09 15:33:18,142 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:18] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:18,262 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:18] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:19,083 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:19,083 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:19] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:25,664 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:25] "GET /channels/-1002280664118/remove HTTP/1.1" 200 -
2025-03-09 15:33:25,834 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:25] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:25,835 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:25] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:26,648 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:26,648 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:26] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:27,490 - server - INFO - Channel -1002280664118 removed by user None
2025-03-09 15:33:27,491 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:27] "[32mPOST /channels/-1002280664118/remove HTTP/1.1[0m" 302 -
2025-03-09 15:33:27,640 - server - INFO - User None listed 2 channels
2025-03-09 15:33:27,641 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:27] "GET /channels HTTP/1.1" 200 -
2025-03-09 15:33:27,809 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:27] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:27,810 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:27] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:28,341 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:28,342 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:28] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:30,861 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:30] "GET /channels/-1002467496944/remove HTTP/1.1" 200 -
2025-03-09 15:33:31,029 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:31] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:31,040 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:31] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:31,949 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:31,949 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:31] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:32,701 - server - INFO - Channel -1002467496944 removed by user None
2025-03-09 15:33:32,702 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:32] "[32mPOST /channels/-1002467496944/remove HTTP/1.1[0m" 302 -
2025-03-09 15:33:32,851 - server - INFO - User None listed 1 channels
2025-03-09 15:33:32,853 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:32] "GET /channels HTTP/1.1" 200 -
2025-03-09 15:33:33,023 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:33] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:33,024 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:33] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:33,546 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:33,546 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:33] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:33:37,749 - server - INFO - User None listed 0 pending channels
2025-03-09 15:33:37,750 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:37] "GET /pending HTTP/1.1" 200 -
2025-03-09 15:33:37,915 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:37] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:33:37,919 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:37] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:33:38,846 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:33:38,846 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:33:38] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:34:08,859 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:34:08,859 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:34:08] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:34:39,635 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:34:39,636 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:34:39] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:35:00,818 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:35:00,818 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:39:13,505 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:39:13,508 - __main__ - INFO - Running as user: runner
2025-03-09 15:39:13,508 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:39:13,508 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:39:13,508 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:39:13,508 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:39:13,509 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:39:13,512 - __main__ - INFO - Importing bot module...
2025-03-09 15:39:13,528 - bot - INFO - Bot initialized with state storage
2025-03-09 15:39:13,528 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:39:13,528 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:39:13,528 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:39:13,529 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:39:13,529 - __main__ - INFO - Initializing bot...
2025-03-09 15:39:13,535 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:39:13,535 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:39:13,936 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:39:13,940 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:39:13,940 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:39:13,941 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:39:13,941 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:39:13,943 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:39:13,943 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:39:13,943 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:39:14,257 - utils.crosspost - INFO - Successfully updated subscriber counts for 1 channels
2025-03-09 15:39:14,257 - bot - INFO - Bot started
2025-03-09 15:39:14,257 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:39:14,257 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:39:14,257 - __main__ - INFO - Starting bot thread...
2025-03-09 15:39:14,258 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:39:14,258 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:39:14,261 - __main__ - INFO - Watchdog thread started
2025-03-09 15:39:14,261 - __main__ - INFO - Watchdog thread started
2025-03-09 15:39:14,263 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:39:14,263 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:39:14,280 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:39:14,280 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:39:14,775 - server - INFO - User None accessed admin dashboard with 1 channels and 0 pending applications
2025-03-09 15:39:14,827 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:39:14] "GET / HTTP/1.1" 200 -
2025-03-09 15:39:15,118 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:39:15] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:39:15,413 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:39:15] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:39:16,136 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:39:16,137 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:39:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:39:39,692 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:39:40,090 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:39:41,753 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:39:41,753 - handlers.channel - INFO - Processing channel name for user 1336308262: Mems
2025-03-09 15:39:41,753 - handlers.channel - INFO - Stored channel title 'Mems' for user 1336308262
2025-03-09 15:39:41,899 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:39:41,899 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:39:46,324 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-09 15:39:46,324 - handlers.channel - INFO - Processing channel URL for user 1336308262: dreams_of_the_dragon
2025-03-09 15:39:46,325 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 1336308262
2025-03-09 15:39:46,469 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 15:39:46,469 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 15:39:46,650 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:39:46,650 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:39:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:40:03,194 - handlers.channel - INFO - User 436699517 started channel application process
2025-03-09 15:40:05,281 - handlers.channel - INFO - Set state to waiting_channel_name for user 436699517
2025-03-09 15:40:12,677 - handlers.channel - INFO - Handling waiting_channel_name state for user 436699517
2025-03-09 15:40:12,677 - handlers.channel - INFO - Processing channel name for user 436699517: Сни Дракона
2025-03-09 15:40:12,677 - handlers.channel - INFO - Stored channel title 'Сни Дракона' for user 436699517
2025-03-09 15:40:12,943 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:40:12,944 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:40:16,646 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:40:16,647 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:40:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:40:19,813 - handlers.channel - INFO - Handling waiting_channel_url state for user 436699517
2025-03-09 15:40:19,813 - handlers.channel - INFO - Processing channel URL for user 436699517: @dreams_of_the_dragon
2025-03-09 15:40:19,813 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 436699517
2025-03-09 15:40:19,967 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 15:40:19,967 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 15:40:46,646 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:40:46,646 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:40:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:41:16,656 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:41:16,659 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:41:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:42:42,659 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:42:42,660 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:42:42] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:43:01,527 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:43:01,527 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:43:01] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:43:16,664 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:43:16,664 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:43:16] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:43:46,662 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:43:46,662 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:43:46] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:44:19,835 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:44:19,836 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:44:20,943 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:44:20,943 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:44:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:44:21,841 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:44:21,841 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:44:21,841 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:44:21,841 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:56:41,610 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:56:41,611 - __main__ - INFO - Running as user: runner
2025-03-09 15:56:41,611 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:56:41,611 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:56:41,612 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:56:41,612 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:56:41,612 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:56:41,617 - __main__ - INFO - Importing bot module...
2025-03-09 15:56:41,623 - bot - INFO - Bot initialized with state storage
2025-03-09 15:56:41,623 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:56:41,623 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:56:41,624 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:56:41,624 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:56:41,624 - __main__ - INFO - Initializing bot...
2025-03-09 15:56:41,635 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:56:41,635 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:56:42,129 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:56:42,131 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:56:42,132 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:56:42,132 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:56:42,133 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:56:42,135 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:56:42,136 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:56:42,136 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:56:42,538 - utils.crosspost - INFO - Successfully updated subscriber counts for 1 channels
2025-03-09 15:56:42,538 - bot - INFO - Bot started
2025-03-09 15:56:42,538 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:56:42,538 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:56:42,538 - __main__ - INFO - Starting bot thread...
2025-03-09 15:56:42,539 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:56:42,541 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:56:42,542 - __main__ - INFO - Watchdog thread started
2025-03-09 15:56:42,542 - __main__ - INFO - Watchdog thread started
2025-03-09 15:56:42,542 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:56:42,542 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:56:42,559 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:56:42,559 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:56:43,511 - server - INFO - User None accessed admin dashboard with 1 channels and 0 pending applications
2025-03-09 15:56:43,548 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:56:43] "GET / HTTP/1.1" 200 -
2025-03-09 15:56:43,833 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:56:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:56:44,135 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:56:44] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:56:44,888 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:56:44,888 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:56:44] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:56:48,592 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:56:48,593 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:56:54,517 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:56:54,518 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:57:01,228 - TeleBot - ERROR - Threaded polling exception: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-03-09 15:57:01,229 - TeleBot - ERROR - Exception traceback:
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 1234, in __threaded_polling
    polling_thread.raise_exceptions()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 111, in raise_exceptions
    raise self.exception_info
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/util.py", line 93, in run
    task(*args, **kwargs)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 688, in __retrieve_updates
    updates = self.get_updates(offset=(self.last_update_id + 1),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/__init__.py", line 660, in get_updates
    json_updates = apihelper.get_updates(
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 332, in get_updates
    return _make_request(token, method_url, params=payload)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 168, in _make_request
    json_result = _check_result(method_name, result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/telebot/apihelper.py", line 195, in _check_result
    raise ApiTelegramException(method_name, result, result_json)
telebot.apihelper.ApiTelegramException: A request to the Telegram API was unsuccessful. Error code: 409. Description: Conflict: terminated by other getUpdates request; make sure that only one bot instance is running

2025-03-09 15:57:14,908 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:57:14,909 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:57:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:57:45,681 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:57:45,681 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:57:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:58:14,905 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:58:14,905 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:14] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:58:44,559 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:58:44,559 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:58:45,684 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:58:45,685 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:45] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:58:48,315 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:58:48,315 - __main__ - INFO - Running as user: runner
2025-03-09 15:58:48,316 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:58:48,317 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:58:48,317 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:58:48,317 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:58:48,318 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:58:48,318 - __main__ - INFO - Importing bot module...
2025-03-09 15:58:48,321 - bot - INFO - Bot initialized with state storage
2025-03-09 15:58:48,322 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:58:48,322 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:58:48,323 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:58:48,323 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:58:48,323 - __main__ - INFO - Initializing bot...
2025-03-09 15:58:48,336 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:58:48,337 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:58:48,720 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:58:48,722 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:58:48,723 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:58:48,723 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:58:48,724 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:58:48,725 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:58:48,725 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:58:48,727 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:58:49,014 - utils.crosspost - INFO - Successfully updated subscriber counts for 1 channels
2025-03-09 15:58:49,014 - bot - INFO - Bot started
2025-03-09 15:58:49,014 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:58:49,014 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:58:49,014 - __main__ - INFO - Starting bot thread...
2025-03-09 15:58:49,014 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:58:49,014 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:58:49,016 - __main__ - INFO - Watchdog thread started
2025-03-09 15:58:49,016 - __main__ - INFO - Watchdog thread started
2025-03-09 15:58:49,017 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:58:49,017 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:58:49,025 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:58:49,025 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:58:49,503 - server - INFO - User None accessed admin dashboard with 1 channels and 0 pending applications
2025-03-09 15:58:49,619 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:49] "GET / HTTP/1.1" 200 -
2025-03-09 15:58:49,855 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:49] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:58:50,023 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:50] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:58:50,173 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:50] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:58:50,718 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:58:50,719 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:58:50] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:59:20,738 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:59:20,738 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:20] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:59:32,981 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:59:33,495 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:59:37,350 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:59:37,351 - handlers.channel - INFO - Processing channel name for user 1336308262: Сни
2025-03-09 15:59:37,351 - handlers.channel - INFO - Stored channel title 'Сни' for user 1336308262
2025-03-09 15:59:37,416 - __main__ - INFO - Shutdown requested. Cleaning up...
2025-03-09 15:59:37,416 - __main__ - INFO - Cleanup complete. Exiting.
2025-03-09 15:59:37,797 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:59:37,797 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:59:41,527 - __main__ - INFO - Python version: 3.11.10 (main, Sep  7 2024, 01:03:31) [GCC 13.3.0]
2025-03-09 15:59:41,528 - __main__ - INFO - Running as user: runner
2025-03-09 15:59:41,528 - __main__ - INFO - Current directory: /home/runner/workspace
2025-03-09 15:59:41,528 - __main__ - INFO - TELEGRAM_BOT_TOKEN set: Yes
2025-03-09 15:59:41,528 - __main__ - INFO - Running under uWSGI: False
2025-03-09 15:59:41,528 - __main__ - WARNING - ADMIN_PASSWORD environment variable not set. Using default password 'admin'.
2025-03-09 15:59:41,528 - __main__ - WARNING - FLASK_SECRET_KEY environment variable not set. Generating a random key.
2025-03-09 15:59:41,529 - __main__ - INFO - Importing bot module...
2025-03-09 15:59:41,531 - bot - INFO - Bot initialized with state storage
2025-03-09 15:59:41,531 - __main__ - INFO - Bot module imported successfully
2025-03-09 15:59:41,531 - __main__ - INFO - Attempting to initialize bot (1/5)...
2025-03-09 15:59:41,532 - __main__ - INFO - Python path: ['/home/runner/workspace', '/nix/store/lc7qv2ldzrs1aq3hbyzmbgvn0h2w26pl-sitecustomize/lib/python/site-packages', '/nix/store/dfg63lldbvcj207iyr9z0xw21d8ax02n-python3.11-pip-24.0/lib/python3.11/site-packages', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python311.zip', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11', '/nix/store/clx0mcir7qw8zk36zbr4jra789g3knf6-python3-3.11.10/lib/python3.11/lib-dynload', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages', '/nix/store/wblvmd5y7izx0z10d1w7ga7zc4apjxmb-python3.11-setuptools-75.1.1/lib/python3.11/site-packages', '/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/setuptools/_vendor']
2025-03-09 15:59:41,532 - __main__ - INFO - Successfully imported bot module
2025-03-09 15:59:41,532 - __main__ - INFO - Initializing bot...
2025-03-09 15:59:41,543 - handlers.channel - INFO - Channel handlers registered
2025-03-09 15:59:41,544 - handlers.admin - INFO - Admin handlers registered
2025-03-09 15:59:41,950 - bot - INFO - Admin commands will be handled based on user ID since telebot doesn't support scoped commands
2025-03-09 15:59:41,952 - apscheduler.scheduler - INFO - Scheduler started
2025-03-09 15:59:41,953 - utils.scheduler - INFO - Scheduler started
2025-03-09 15:59:41,954 - apscheduler.scheduler - INFO - Added job "schedule_daily_crosspost" to job store "default"
2025-03-09 15:59:41,954 - apscheduler.scheduler - INFO - Added job "update_all_channel_subscribers" to job store "default"
2025-03-09 15:59:41,955 - utils.scheduler - INFO - Scheduling crosspost for exactly 6 PM Kyiv time: 2025-03-09 18:00:00+02:00
2025-03-09 15:59:41,955 - apscheduler.scheduler - INFO - Added job "create_and_send_crosspost" to job store "default"
2025-03-09 15:59:41,956 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 15:59:42,213 - utils.crosspost - INFO - Successfully updated subscriber counts for 1 channels
2025-03-09 15:59:42,213 - bot - INFO - Bot started
2025-03-09 15:59:42,213 - __main__ - INFO - Bot instance created successfully
2025-03-09 15:59:42,213 - __main__ - INFO - Bot initialized successfully on attempt 1/5
2025-03-09 15:59:42,213 - __main__ - INFO - Starting bot thread...
2025-03-09 15:59:42,213 - __main__ - INFO - Starting bot polling in separate thread
2025-03-09 15:59:42,214 - __main__ - INFO - Bot thread started successfully
2025-03-09 15:59:42,215 - __main__ - INFO - Watchdog thread started
2025-03-09 15:59:42,216 - __main__ - INFO - Watchdog thread started
2025-03-09 15:59:42,216 - __main__ - INFO - Web application ready to be served on port 5000
2025-03-09 15:59:42,216 - __main__ - INFO - Running in direct execution mode, starting Flask server for development
2025-03-09 15:59:42,223 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.28:5000
2025-03-09 15:59:42,223 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-09 15:59:42,672 - server - INFO - User None accessed admin dashboard with 1 channels and 0 pending applications
2025-03-09 15:59:42,700 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:42] "GET / HTTP/1.1" 200 -
2025-03-09 15:59:43,002 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:43] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:59:43,144 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:43] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:59:43,811 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:59:43,811 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:43] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:59:50,223 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:50] "[31m[1mGET / HTTP/1.1[0m" 401 -
2025-03-09 15:59:50,721 - handlers.channel - INFO - User 1336308262 started channel application process
2025-03-09 15:59:50,965 - server - INFO - User None accessed admin dashboard with 1 channels and 0 pending applications
2025-03-09 15:59:50,965 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:50] "GET / HTTP/1.1" 200 -
2025-03-09 15:59:51,219 - handlers.channel - INFO - Set state to waiting_channel_name for user 1336308262
2025-03-09 15:59:51,261 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:51] "[36mGET /static/css/styles.css HTTP/1.1[0m" 304 -
2025-03-09 15:59:51,405 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:51] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-03-09 15:59:52,037 - server - INFO - User None retrieved stats with scope: network
2025-03-09 15:59:52,037 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 15:59:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 15:59:53,312 - handlers.channel - INFO - Handling waiting_channel_name state for user 1336308262
2025-03-09 15:59:53,312 - handlers.channel - INFO - Processing channel name for user 1336308262: сни
2025-03-09 15:59:53,312 - handlers.channel - INFO - Stored channel title 'сни' for user 1336308262
2025-03-09 15:59:53,709 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_name
2025-03-09 15:59:53,709 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_name to ChannelStates:waiting_channel_url
2025-03-09 15:59:59,893 - handlers.channel - INFO - Handling waiting_channel_url state for user 1336308262
2025-03-09 15:59:59,893 - handlers.channel - INFO - Processing channel URL for user 1336308262: dreams_of_the_dragon
2025-03-09 15:59:59,894 - handlers.channel - INFO - Stored channel username 'dreams_of_the_dragon' for user 1336308262
2025-03-09 16:00:00,000 - apscheduler.executors.default - INFO - Running job "create_and_send_crosspost (trigger: date[2025-03-09 18:00:00 EET], next run at: 2025-03-09 18:00:00 EET)" (scheduled at 2025-03-09 18:00:00+02:00)
2025-03-09 16:00:00,000 - apscheduler.scheduler - INFO - Removed job daily_crosspost
2025-03-09 16:00:00,001 - utils.crosspost - INFO - Creating crosspost for 1 active channels
2025-03-09 16:00:00,008 - apscheduler.executors.default - INFO - Running job "update_all_channel_subscribers (trigger: cron[minute='0'], next run at: 2025-03-09 18:00:00 EET)" (scheduled at 2025-03-09 18:00:00+02:00)
2025-03-09 16:00:00,009 - utils.crosspost - INFO - Updating subscriber counts for all channels
2025-03-09 16:00:00,068 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_channel_url
2025-03-09 16:00:00,068 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_channel_url to ChannelStates:waiting_emoji
2025-03-09 16:00:00,521 - utils.crosspost - INFO - Found 1 small channels (<300 subscribers) and 0 large channels
2025-03-09 16:00:00,522 - utils.storage - ERROR - Error decoding JSON from data/channels.json
2025-03-09 16:00:00,523 - utils.crosspost - INFO - Found 0 channels with reserved positions for SFW content
2025-03-09 16:00:00,523 - utils.crosspost - INFO - Successfully updated subscriber counts for 1 channels
2025-03-09 16:00:00,523 - apscheduler.executors.default - INFO - Job "update_all_channel_subscribers (trigger: cron[minute='0'], next run at: 2025-03-09 19:00:00 EET)" executed successfully
2025-03-09 16:00:00,523 - utils.crosspost - INFO - Only 1 channels available, using all of them
2025-03-09 16:00:00,689 - utils.crosspost - INFO - Preparing SFW crosspost for 1 channels
2025-03-09 16:00:00,689 - utils.crosspost - WARNING - No other channels to promote to -1001761783348, skipping
2025-03-09 16:00:00,689 - utils.crosspost - INFO - Completed crosspost for SFW group
2025-03-09 16:00:00,689 - apscheduler.executors.default - INFO - Job "create_and_send_crosspost (trigger: date[2025-03-09 18:00:00 EET], next run at: 2025-03-09 18:00:00 EET)" executed successfully
2025-03-09 16:00:03,149 - handlers.channel - INFO - Handling waiting_emoji state for user 1336308262
2025-03-09 16:00:03,149 - handlers.channel - INFO - Processing emoji selection for user 1336308262
2025-03-09 16:00:03,149 - handlers.channel - INFO - Found emojis: ['🇺🇦', '💻', '🎮']
2025-03-09 16:00:03,149 - handlers.channel - INFO - Stored emojis ['🇺🇦', '💻', '🎮'] for user 1336308262
2025-03-09 16:00:03,362 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_emoji
2025-03-09 16:00:03,362 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_emoji to ChannelStates:waiting_admin_verification
2025-03-09 16:00:06,842 - handlers.channel - INFO - Handling waiting_admin_verification state for user 1336308262
2025-03-09 16:00:06,842 - handlers.channel - INFO - Processing admin verification for user 1336308262
2025-03-09 16:00:06,842 - handlers.channel - INFO - Channel data so far: {'title': 'сни', 'username': 'dreams_of_the_dragon', 'emojis': ['🇺🇦', '💻', '🎮']}
2025-03-09 16:00:06,842 - handlers.channel - INFO - Skipping admin verification check for now
2025-03-09 16:00:07,012 - handlers.channel - INFO - Current state before transition: ChannelStates:waiting_admin_verification
2025-03-09 16:00:07,012 - handlers.channel - INFO - State transitioned from ChannelStates:waiting_admin_verification to ChannelStates:waiting_post_forward
2025-03-09 16:00:20,411 - handlers.channel - INFO - Handling waiting_post_forward state for user 1336308262
2025-03-09 16:00:20,411 - handlers.channel - INFO - Processing forwarded post from user 1336308262
2025-03-09 16:00:20,411 - handlers.channel - INFO - Message details: forward_from_chat={'id': -1001738314674, 'type': 'channel', 'title': 'Сни Дракона', 'username': 'dreams_of_the_dragon', 'first_name': None, 'last_name': None, 'is_forum': None, 'max_reaction_count': None, 'photo': None, 'bio': None, 'join_to_send_messages': None, 'join_by_request': None, 'has_private_forwards': None, 'has_restricted_voice_and_video_messages': None, 'description': None, 'invite_link': None, 'pinned_message': None, 'permissions': None, 'slow_mode_delay': None, 'message_auto_delete_time': None, 'has_protected_content': None, 'sticker_set_name': None, 'can_set_sticker_set': None, 'linked_chat_id': None, 'location': None, 'active_usernames': None, 'emoji_status_custom_emoji_id': None, 'has_hidden_members': None, 'has_aggressive_anti_spam_enabled': None, 'emoji_status_expiration_date': None, 'available_reactions': None, 'accent_color_id': None, 'background_custom_emoji_id': None, 'profile_accent_color_id': None, 'profile_background_custom_emoji_id': None, 'has_visible_history': None, 'unrestrict_boost_count': None, 'custom_emoji_sticker_set_name': None, 'business_intro': None, 'business_location': None, 'business_opening_hours': None, 'personal_chat': None, 'birthdate': None, 'can_send_paid_media': None}
2025-03-09 16:00:20,412 - handlers.channel - INFO - Chat type: channel
2025-03-09 16:00:20,412 - handlers.channel - INFO - Processing channel: -1001738314674 - Сни Дракона
2025-03-09 16:00:22,687 - server - INFO - User None retrieved stats with scope: network
2025-03-09 16:00:22,687 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 16:00:22] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 16:00:40,768 - handlers.channel - INFO - User 1336308262 requested channel status
2025-03-09 16:00:40,769 - handlers.channel - INFO - Found 0 approved and 1 pending channels for user 1336308262
2025-03-09 16:00:46,407 - handlers.admin - INFO - Admin callback: view_approved
2025-03-09 16:00:52,690 - server - INFO - User None retrieved stats with scope: network
2025-03-09 16:00:52,690 - werkzeug - INFO - 172.31.128.28 - - [09/Mar/2025 16:00:52] "GET /api/stats HTTP/1.1" 200 -
2025-03-09 16:00:58,812 - handlers.admin - INFO - Admin callback: admin_back
2025-03-09 16:00:58,812 - handlers.admin - INFO - Admin callback: admin_back - returning to admin panel
2025-03-09 16:00:59,269 - handlers.admin - INFO - Admin panel markup displayed successfully
