[uwsgi]
# Basic configuration
module = server:app
master = true
processes = 4
threads = 2

# Socket configuration (production)
socket = 127.0.0.1:8000
chmod-socket = 664

# HTTP configuration (for development and direct access)
http = 0.0.0.0:5000
http-timeout = 300

# Process naming
auto-procname = true
procname-prefix-spaced = tg-crosspost

# File monitoring and reload
py-autoreload = 1

# Logging
logto = ./logs/uwsgi.log
log-format = %(ctime) - %(method) %(uri) - %(status) - %(msecs)ms

# Error handling
harakiri = 300
harakiri-verbose = true
reload-on-exception = true
reload-mercy = 15
max-requests = 1000

# Bot thread management (don't restart worker processes)
lazy-apps = true

# Static files
static-map = /static=./static

# Enable stats server
stats = 127.0.0.1:9191
memory-report = true